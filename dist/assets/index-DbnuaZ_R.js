(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Cc={exports:{}},Ni={},Oc={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=Symbol.for("react.element"),pf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),wf=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),bf=Symbol.for("react.memo"),kf=Symbol.for("react.lazy"),ql=Symbol.iterator;function Sf(e){return e===null||typeof e!="object"?null:(e=ql&&e[ql]||e["@@iterator"],typeof e=="function"?e:null)}var Rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pc=Object.assign,Ac={};function un(e,t,r){this.props=e,this.context=t,this.refs=Ac,this.updater=r||Rc}un.prototype.isReactComponent={};un.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};un.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ic(){}Ic.prototype=un.prototype;function za(e,t,r){this.props=e,this.context=t,this.refs=Ac,this.updater=r||Rc}var Ba=za.prototype=new Ic;Ba.constructor=za;Pc(Ba,un.prototype);Ba.isPureReactComponent=!0;var Kl=Array.isArray,$c=Object.prototype.hasOwnProperty,Va={current:null},Lc={key:!0,ref:!0,__self:!0,__source:!0};function Uc(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$c.call(t,n)&&!Lc.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:us,type:e,key:i,ref:o,props:s,_owner:Va.current}}function Ef(e,t){return{$$typeof:us,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wa(e){return typeof e=="object"&&e!==null&&e.$$typeof===us}function jf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Gl=/\/+/g;function Zi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jf(""+e.key):t.toString(36)}function Bs(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case us:case pf:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Zi(o,0):n,Kl(s)?(r="",e!=null&&(r=e.replace(Gl,"$&/")+"/"),Bs(s,t,r,"",function(c){return c})):s!=null&&(Wa(s)&&(s=Ef(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Kl(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Zi(i,a);o+=Bs(i,t,r,l,s)}else if(l=Sf(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Zi(i,a++),o+=Bs(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xs(e,t,r){if(e==null)return e;var n=[],s=0;return Bs(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var je={current:null},Vs={transition:null},Tf={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:Va};function Dc(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:xs,forEach:function(e,t,r){xs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xs(e,function(){t++}),t},toArray:function(e){return xs(e,function(t){return t})||[]},only:function(e){if(!Wa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=un;B.Fragment=mf;B.Profiler=vf;B.PureComponent=za;B.StrictMode=gf;B.Suspense=_f;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tf;B.act=Dc;B.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Pc({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Va.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)$c.call(t,l)&&!Lc.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:us,type:e.type,key:s,ref:i,props:n,_owner:o}};B.createContext=function(e){return e={$$typeof:wf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yf,_context:e},e.Consumer=e};B.createElement=Uc;B.createFactory=function(e){var t=Uc.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:xf,render:e}};B.isValidElement=Wa;B.lazy=function(e){return{$$typeof:kf,_payload:{_status:-1,_result:e},_init:Nf}};B.memo=function(e,t){return{$$typeof:bf,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=Vs.transition;Vs.transition={};try{e()}finally{Vs.transition=t}};B.unstable_act=Dc;B.useCallback=function(e,t){return je.current.useCallback(e,t)};B.useContext=function(e){return je.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return je.current.useDeferredValue(e)};B.useEffect=function(e,t){return je.current.useEffect(e,t)};B.useId=function(){return je.current.useId()};B.useImperativeHandle=function(e,t,r){return je.current.useImperativeHandle(e,t,r)};B.useInsertionEffect=function(e,t){return je.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return je.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return je.current.useMemo(e,t)};B.useReducer=function(e,t,r){return je.current.useReducer(e,t,r)};B.useRef=function(e){return je.current.useRef(e)};B.useState=function(e){return je.current.useState(e)};B.useSyncExternalStore=function(e,t,r){return je.current.useSyncExternalStore(e,t,r)};B.useTransition=function(){return je.current.useTransition()};B.version="18.3.1";Oc.exports=B;var R=Oc.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf=R,Of=Symbol.for("react.element"),Rf=Symbol.for("react.fragment"),Pf=Object.prototype.hasOwnProperty,Af=Cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,If={key:!0,ref:!0,__self:!0,__source:!0};function Mc(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Pf.call(t,n)&&!If.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Of,type:e,key:i,ref:o,props:s,_owner:Af.current}}Ni.Fragment=Rf;Ni.jsx=Mc;Ni.jsxs=Mc;Cc.exports=Ni;var u=Cc.exports,Fc={exports:{}},Be={},zc={exports:{}},Bc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,D){var M=C.length;C.push(D);e:for(;0<M;){var Q=M-1>>>1,ie=C[Q];if(0<s(ie,D))C[Q]=D,C[M]=ie,M=Q;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var D=C[0],M=C.pop();if(M!==D){C[0]=M;e:for(var Q=0,ie=C.length,Ie=ie>>>1;Q<Ie;){var Ye=2*(Q+1)-1,gs=C[Ye],gt=Ye+1,F=C[gt];if(0>s(gs,M))gt<ie&&0>s(F,gs)?(C[Q]=F,C[gt]=M,Q=gt):(C[Q]=gs,C[Ye]=M,Q=Ye);else if(gt<ie&&0>s(F,M))C[Q]=F,C[gt]=M,Q=gt;else break e}}return D}function s(C,D){var M=C.sortIndex-D.sortIndex;return M!==0?M:C.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,h=3,m=!1,y=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(C){for(var D=r(c);D!==null;){if(D.callback===null)n(c);else if(D.startTime<=C)n(c),D.sortIndex=D.expirationTime,t(l,D);else break;D=r(c)}}function w(C){if(_=!1,v(C),!y)if(r(l)!==null)y=!0,_r(S);else{var D=r(c);D!==null&&br(w,D.startTime-C)}}function S(C,D){y=!1,_&&(_=!1,g(N),N=-1),m=!0;var M=h;try{for(v(D),p=r(l);p!==null&&(!(p.expirationTime>D)||C&&!J());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,h=p.priorityLevel;var ie=Q(p.expirationTime<=D);D=e.unstable_now(),typeof ie=="function"?p.callback=ie:p===r(l)&&n(l),v(D)}else n(l);p=r(l)}if(p!==null)var Ie=!0;else{var Ye=r(c);Ye!==null&&br(w,Ye.startTime-D),Ie=!1}return Ie}finally{p=null,h=M,m=!1}}var b=!1,E=null,N=-1,A=5,I=-1;function J(){return!(e.unstable_now()-I<A)}function Ct(){if(E!==null){var C=e.unstable_now();I=C;var D=!0;try{D=E(!0,C)}finally{D?ye():(b=!1,E=null)}}else b=!1}var ye;if(typeof f=="function")ye=function(){f(Ct)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,ms=mt.port2;mt.port1.onmessage=Ct,ye=function(){ms.postMessage(null)}}else ye=function(){k(Ct,0)};function _r(C){E=C,b||(b=!0,ye())}function br(C,D){N=k(function(){C(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,_r(S))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var M=h;h=D;try{return C()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,D){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var M=h;h=C;try{return D()}finally{h=M}},e.unstable_scheduleCallback=function(C,D,M){var Q=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Q+M:Q):M=Q,C){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=M+ie,C={id:d++,callback:D,priorityLevel:C,startTime:M,expirationTime:ie,sortIndex:-1},M>Q?(C.sortIndex=M,t(c,C),r(l)===null&&C===r(c)&&(_?(g(N),N=-1):_=!0,br(w,M-Q))):(C.sortIndex=ie,t(l,C),y||m||(y=!0,_r(S))),C},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(C){var D=h;return function(){var M=h;h=D;try{return C.apply(this,arguments)}finally{h=M}}}})(Bc);zc.exports=Bc;var $f=zc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=R,ze=$f;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vc=new Set,Fn={};function wr(e,t){tn(e,t),tn(e+"Capture",t)}function tn(e,t){for(Fn[e]=t,e=0;e<t.length;e++)Vc.add(t[e])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=Object.prototype.hasOwnProperty,Uf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jl={},Ql={};function Df(e){return Uo.call(Ql,e)?!0:Uo.call(Jl,e)?!1:Uf.test(e)?Ql[e]=!0:(Jl[e]=!0,!1)}function Mf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ff(e,t,r,n){if(t===null||typeof t>"u"||Mf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ne(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new Ne(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new Ne(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new Ne(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new Ne(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new Ne(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new Ne(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ve[e]=new Ne(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new Ne(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new Ne(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ha=/[\-:]([a-z])/g;function qa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ha,qa);ve[t]=new Ne(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ha,qa);ve[t]=new Ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ha,qa);ve[t]=new Ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new Ne(e,1,!1,e.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ve[e]=new Ne(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ka(e,t,r,n){var s=ve.hasOwnProperty(t)?ve[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ff(t,r,s,n)&&(r=null),n||s===null?Df(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Nt=Lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_s=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Ga=Symbol.for("react.strict_mode"),Do=Symbol.for("react.profiler"),Wc=Symbol.for("react.provider"),Hc=Symbol.for("react.context"),Ja=Symbol.for("react.forward_ref"),Mo=Symbol.for("react.suspense"),Fo=Symbol.for("react.suspense_list"),Qa=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),qc=Symbol.for("react.offscreen"),Yl=Symbol.iterator;function pn(e){return e===null||typeof e!="object"?null:(e=Yl&&e[Yl]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,eo;function Sn(e){if(eo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);eo=t&&t[1]||""}return`
`+eo+e}var to=!1;function ro(e,t){if(!e||to)return"";to=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{to=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Sn(e):""}function zf(e){switch(e.tag){case 5:return Sn(e.type);case 16:return Sn("Lazy");case 13:return Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 2:case 15:return e=ro(e.type,!1),e;case 11:return e=ro(e.type.render,!1),e;case 1:return e=ro(e.type,!0),e;default:return""}}function zo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lr:return"Fragment";case $r:return"Portal";case Do:return"Profiler";case Ga:return"StrictMode";case Mo:return"Suspense";case Fo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hc:return(e.displayName||"Context")+".Consumer";case Wc:return(e._context.displayName||"Context")+".Provider";case Ja:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qa:return t=e.displayName||null,t!==null?t:zo(e.type)||"Memo";case Pt:t=e._payload,e=e._init;try{return zo(e(t))}catch{}}return null}function Bf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zo(t);case 8:return t===Ga?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vf(e){var t=Kc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=Vf(e))}function Gc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Kc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ei(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bo(e,t){var r=t.checked;return te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jc(e,t){t=t.checked,t!=null&&Ka(e,"checked",t,!1)}function Vo(e,t){Jc(e,t);var r=Gt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wo(e,t.type,Gt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wo(e,t,r){(t!=="number"||ei(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var En=Array.isArray;function Gr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ho(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(j(92));if(En(r)){if(1<r.length)throw Error(j(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gt(r)}}function Qc(e,t){var r=Gt(t.value),n=Gt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ks,Xc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wf=["Webkit","ms","Moz","O"];Object.keys(Cn).forEach(function(e){Wf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cn[t]=Cn[e]})});function Zc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cn.hasOwnProperty(e)&&Cn[e]?(""+t).trim():t+"px"}function ed(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Zc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Hf=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(e,t){if(t){if(Hf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Go(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function Ya(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,Jr=null,Qr=null;function ru(e){if(e=hs(e)){if(typeof Qo!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Pi(t),Qo(e.stateNode,e.type,t))}}function td(e){Jr?Qr?Qr.push(e):Qr=[e]:Jr=e}function rd(){if(Jr){var e=Jr,t=Qr;if(Qr=Jr=null,ru(e),t)for(e=0;e<t.length;e++)ru(t[e])}}function nd(e,t){return e(t)}function sd(){}var no=!1;function id(e,t,r){if(no)return e(t,r);no=!0;try{return nd(e,t,r)}finally{no=!1,(Jr!==null||Qr!==null)&&(sd(),rd())}}function Bn(e,t){var r=e.stateNode;if(r===null)return null;var n=Pi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(j(231,t,typeof r));return r}var Yo=!1;if(kt)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{Yo=!1}function qf(e,t,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var On=!1,ti=null,ri=!1,Xo=null,Kf={onError:function(e){On=!0,ti=e}};function Gf(e,t,r,n,s,i,o,a,l){On=!1,ti=null,qf.apply(Kf,arguments)}function Jf(e,t,r,n,s,i,o,a,l){if(Gf.apply(this,arguments),On){if(On){var c=ti;On=!1,ti=null}else throw Error(j(198));ri||(ri=!0,Xo=c)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function od(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nu(e){if(xr(e)!==e)throw Error(j(188))}function Qf(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(j(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return nu(s),e;if(i===n)return nu(s),t;i=i.sibling}throw Error(j(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(r.alternate!==n)throw Error(j(190))}if(r.tag!==3)throw Error(j(188));return r.stateNode.current===r?e:t}function ad(e){return e=Qf(e),e!==null?ld(e):null}function ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ld(e);if(t!==null)return t;e=e.sibling}return null}var ud=ze.unstable_scheduleCallback,su=ze.unstable_cancelCallback,Yf=ze.unstable_shouldYield,Xf=ze.unstable_requestPaint,se=ze.unstable_now,Zf=ze.unstable_getCurrentPriorityLevel,Xa=ze.unstable_ImmediatePriority,cd=ze.unstable_UserBlockingPriority,ni=ze.unstable_NormalPriority,ep=ze.unstable_LowPriority,dd=ze.unstable_IdlePriority,Ti=null,ft=null;function tp(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Ti,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:sp,rp=Math.log,np=Math.LN2;function sp(e){return e>>>=0,e===0?32:31-(rp(e)/np|0)|0}var Ss=64,Es=4194304;function jn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function si(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=jn(a):(i&=o,i!==0&&(n=jn(i)))}else o=r&~s,o!==0?n=jn(o):i!==0&&(n=jn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function ip(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function op(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=ip(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Zo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=Ss;return Ss<<=1,!(Ss&4194240)&&(Ss=64),e}function so(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function ap(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Za(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function fd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pd,el,md,gd,vd,ea=!1,js=[],Ft=null,zt=null,Bt=null,Vn=new Map,Wn=new Map,$t=[],lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iu(e,t){switch(e){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Vn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(t.pointerId)}}function gn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=hs(t),t!==null&&el(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function up(e,t,r,n,s){switch(t){case"focusin":return Ft=gn(Ft,e,t,r,n,s),!0;case"dragenter":return zt=gn(zt,e,t,r,n,s),!0;case"mouseover":return Bt=gn(Bt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Vn.set(i,gn(Vn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Wn.set(i,gn(Wn.get(i)||null,e,t,r,n,s)),!0}return!1}function yd(e){var t=lr(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=od(r),t!==null){e.blockedOn=t,vd(e.priority,function(){md(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ws(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ta(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Jo=n,r.target.dispatchEvent(n),Jo=null}else return t=hs(r),t!==null&&el(t),e.blockedOn=r,!1;t.shift()}return!0}function ou(e,t,r){Ws(e)&&r.delete(t)}function cp(){ea=!1,Ft!==null&&Ws(Ft)&&(Ft=null),zt!==null&&Ws(zt)&&(zt=null),Bt!==null&&Ws(Bt)&&(Bt=null),Vn.forEach(ou),Wn.forEach(ou)}function vn(e,t){e.blockedOn===t&&(e.blockedOn=null,ea||(ea=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,cp)))}function Hn(e){function t(s){return vn(s,e)}if(0<js.length){vn(js[0],e);for(var r=1;r<js.length;r++){var n=js[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ft!==null&&vn(Ft,e),zt!==null&&vn(zt,e),Bt!==null&&vn(Bt,e),Vn.forEach(t),Wn.forEach(t),r=0;r<$t.length;r++)n=$t[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$t.length&&(r=$t[0],r.blockedOn===null);)yd(r),r.blockedOn===null&&$t.shift()}var Yr=Nt.ReactCurrentBatchConfig,ii=!0;function dp(e,t,r,n){var s=W,i=Yr.transition;Yr.transition=null;try{W=1,tl(e,t,r,n)}finally{W=s,Yr.transition=i}}function hp(e,t,r,n){var s=W,i=Yr.transition;Yr.transition=null;try{W=4,tl(e,t,r,n)}finally{W=s,Yr.transition=i}}function tl(e,t,r,n){if(ii){var s=ta(e,t,r,n);if(s===null)mo(e,t,n,oi,r),iu(e,n);else if(up(s,e,t,r,n))n.stopPropagation();else if(iu(e,n),t&4&&-1<lp.indexOf(e)){for(;s!==null;){var i=hs(s);if(i!==null&&pd(i),i=ta(e,t,r,n),i===null&&mo(e,t,n,oi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else mo(e,t,n,null,r)}}var oi=null;function ta(e,t,r,n){if(oi=null,e=Ya(n),e=lr(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=od(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oi=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case Xa:return 1;case cd:return 4;case ni:case ep:return 16;case dd:return 536870912;default:return 16}default:return 16}}var Dt=null,rl=null,Hs=null;function xd(){if(Hs)return Hs;var e,t=rl,r=t.length,n,s="value"in Dt?Dt.value:Dt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Hs=s.slice(e,1<n?1-n:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ns(){return!0}function au(){return!1}function Ve(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ns:au,this.isPropagationStopped=au,this}return te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),t}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=Ve(cn),ds=te({},cn,{view:0,detail:0}),fp=Ve(ds),io,oo,yn,Ci=te({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&e.type==="mousemove"?(io=e.screenX-yn.screenX,oo=e.screenY-yn.screenY):oo=io=0,yn=e),io)},movementY:function(e){return"movementY"in e?e.movementY:oo}}),lu=Ve(Ci),pp=te({},Ci,{dataTransfer:0}),mp=Ve(pp),gp=te({},ds,{relatedTarget:0}),ao=Ve(gp),vp=te({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),yp=Ve(vp),wp=te({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xp=Ve(wp),_p=te({},cn,{data:0}),uu=Ve(_p),bp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sp[e])?!!t[e]:!1}function sl(){return Ep}var jp=te({},ds,{key:function(e){if(e.key){var t=bp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sl,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Np=Ve(jp),Tp=te({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=Ve(Tp),Cp=te({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sl}),Op=Ve(Cp),Rp=te({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pp=Ve(Rp),Ap=te({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ip=Ve(Ap),$p=[9,13,27,32],il=kt&&"CompositionEvent"in window,Rn=null;kt&&"documentMode"in document&&(Rn=document.documentMode);var Lp=kt&&"TextEvent"in window&&!Rn,_d=kt&&(!il||Rn&&8<Rn&&11>=Rn),du=" ",hu=!1;function bd(e,t){switch(e){case"keyup":return $p.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function Up(e,t){switch(e){case"compositionend":return kd(t);case"keypress":return t.which!==32?null:(hu=!0,du);case"textInput":return e=t.data,e===du&&hu?null:e;default:return null}}function Dp(e,t){if(Ur)return e==="compositionend"||!il&&bd(e,t)?(e=xd(),Hs=rl=Dt=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _d&&t.locale!=="ko"?null:t.data;default:return null}}var Mp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mp[e.type]:t==="textarea"}function Sd(e,t,r,n){td(n),t=ai(t,"onChange"),0<t.length&&(r=new nl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Pn=null,qn=null;function Fp(e){$d(e,0)}function Oi(e){var t=Fr(e);if(Gc(t))return e}function zp(e,t){if(e==="change")return t}var Ed=!1;if(kt){var lo;if(kt){var uo="oninput"in document;if(!uo){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),uo=typeof pu.oninput=="function"}lo=uo}else lo=!1;Ed=lo&&(!document.documentMode||9<document.documentMode)}function mu(){Pn&&(Pn.detachEvent("onpropertychange",jd),qn=Pn=null)}function jd(e){if(e.propertyName==="value"&&Oi(qn)){var t=[];Sd(t,qn,e,Ya(e)),id(Fp,t)}}function Bp(e,t,r){e==="focusin"?(mu(),Pn=t,qn=r,Pn.attachEvent("onpropertychange",jd)):e==="focusout"&&mu()}function Vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oi(qn)}function Wp(e,t){if(e==="click")return Oi(t)}function Hp(e,t){if(e==="input"||e==="change")return Oi(t)}function qp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:qp;function Kn(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Uo.call(t,s)||!lt(e[s],t[s]))return!1}return!0}function gu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var r=gu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gu(r)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Td(){for(var e=window,t=ei();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ei(e.document)}return t}function ol(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kp(e){var t=Td(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Nd(r.ownerDocument.documentElement,r)){if(n!==null&&ol(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=vu(r,i);var o=vu(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gp=kt&&"documentMode"in document&&11>=document.documentMode,Dr=null,ra=null,An=null,na=!1;function yu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;na||Dr==null||Dr!==ei(n)||(n=Dr,"selectionStart"in n&&ol(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),An&&Kn(An,n)||(An=n,n=ai(ra,"onSelect"),0<n.length&&(t=new nl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Dr)))}function Ts(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Mr={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},co={},Cd={};kt&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Ri(e){if(co[e])return co[e];if(!Mr[e])return e;var t=Mr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Cd)return co[e]=t[r];return e}var Od=Ri("animationend"),Rd=Ri("animationiteration"),Pd=Ri("animationstart"),Ad=Ri("transitionend"),Id=new Map,wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(e,t){Id.set(e,t),wr(t,[e])}for(var ho=0;ho<wu.length;ho++){var fo=wu[ho],Jp=fo.toLowerCase(),Qp=fo[0].toUpperCase()+fo.slice(1);Qt(Jp,"on"+Qp)}Qt(Od,"onAnimationEnd");Qt(Rd,"onAnimationIteration");Qt(Pd,"onAnimationStart");Qt("dblclick","onDoubleClick");Qt("focusin","onFocus");Qt("focusout","onBlur");Qt(Ad,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nn));function xu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Jf(n,t,void 0,e),e.currentTarget=null}function $d(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;xu(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;xu(s,a,c),i=l}}}if(ri)throw e=Xo,ri=!1,Xo=null,e}function K(e,t){var r=t[la];r===void 0&&(r=t[la]=new Set);var n=e+"__bubble";r.has(n)||(Ld(t,e,2,!1),r.add(n))}function po(e,t,r){var n=0;t&&(n|=4),Ld(r,e,n,t)}var Cs="_reactListening"+Math.random().toString(36).slice(2);function Gn(e){if(!e[Cs]){e[Cs]=!0,Vc.forEach(function(r){r!=="selectionchange"&&(Yp.has(r)||po(r,!1,e),po(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cs]||(t[Cs]=!0,po("selectionchange",!1,t))}}function Ld(e,t,r,n){switch(wd(t)){case 1:var s=dp;break;case 4:s=hp;break;default:s=tl}r=s.bind(null,t,r,e),s=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function mo(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lr(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}id(function(){var c=i,d=Ya(r),p=[];e:{var h=Id.get(e);if(h!==void 0){var m=nl,y=e;switch(e){case"keypress":if(qs(r)===0)break e;case"keydown":case"keyup":m=Np;break;case"focusin":y="focus",m=ao;break;case"focusout":y="blur",m=ao;break;case"beforeblur":case"afterblur":m=ao;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Op;break;case Od:case Rd:case Pd:m=yp;break;case Ad:m=Pp;break;case"scroll":m=fp;break;case"wheel":m=Ip;break;case"copy":case"cut":case"paste":m=xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cu}var _=(t&4)!==0,k=!_&&e==="scroll",g=_?h!==null?h+"Capture":null:h;_=[];for(var f=c,v;f!==null;){v=f;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=Bn(f,g),w!=null&&_.push(Jn(f,w,v)))),k)break;f=f.return}0<_.length&&(h=new m(h,y,null,r,d),p.push({event:h,listeners:_}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==Jo&&(y=r.relatedTarget||r.fromElement)&&(lr(y)||y[St]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=c,y=y?lr(y):null,y!==null&&(k=xr(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(_=lu,w="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(_=cu,w="onPointerLeave",g="onPointerEnter",f="pointer"),k=m==null?h:Fr(m),v=y==null?h:Fr(y),h=new _(w,f+"leave",m,r,d),h.target=k,h.relatedTarget=v,w=null,lr(d)===c&&(_=new _(g,f+"enter",y,r,d),_.target=v,_.relatedTarget=k,w=_),k=w,m&&y)t:{for(_=m,g=y,f=0,v=_;v;v=kr(v))f++;for(v=0,w=g;w;w=kr(w))v++;for(;0<f-v;)_=kr(_),f--;for(;0<v-f;)g=kr(g),v--;for(;f--;){if(_===g||g!==null&&_===g.alternate)break t;_=kr(_),g=kr(g)}_=null}else _=null;m!==null&&_u(p,h,m,_,!1),y!==null&&k!==null&&_u(p,k,y,_,!0)}}e:{if(h=c?Fr(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=zp;else if(fu(h))if(Ed)S=Hp;else{S=Vp;var b=Bp}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Wp);if(S&&(S=S(e,c))){Sd(p,S,r,d);break e}b&&b(e,h,c),e==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&Wo(h,"number",h.value)}switch(b=c?Fr(c):window,e){case"focusin":(fu(b)||b.contentEditable==="true")&&(Dr=b,ra=c,An=null);break;case"focusout":An=ra=Dr=null;break;case"mousedown":na=!0;break;case"contextmenu":case"mouseup":case"dragend":na=!1,yu(p,r,d);break;case"selectionchange":if(Gp)break;case"keydown":case"keyup":yu(p,r,d)}var E;if(il)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ur?bd(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(_d&&r.locale!=="ko"&&(Ur||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ur&&(E=xd()):(Dt=d,rl="value"in Dt?Dt.value:Dt.textContent,Ur=!0)),b=ai(c,N),0<b.length&&(N=new uu(N,e,null,r,d),p.push({event:N,listeners:b}),E?N.data=E:(E=kd(r),E!==null&&(N.data=E)))),(E=Lp?Up(e,r):Dp(e,r))&&(c=ai(c,"onBeforeInput"),0<c.length&&(d=new uu("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:c}),d.data=E))}$d(p,t)})}function Jn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ai(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bn(e,r),i!=null&&n.unshift(Jn(e,i,s)),i=Bn(e,t),i!=null&&n.push(Jn(e,i,s))),e=e.return}return n}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _u(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Bn(r,i),l!=null&&o.unshift(Jn(r,l,a))):s||(l=Bn(r,i),l!=null&&o.push(Jn(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Xp=/\r\n?/g,Zp=/\u0000|\uFFFD/g;function bu(e){return(typeof e=="string"?e:""+e).replace(Xp,`
`).replace(Zp,"")}function Os(e,t,r){if(t=bu(t),bu(e)!==t&&r)throw Error(j(425))}function li(){}var sa=null,ia=null;function oa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var aa=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,ku=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof ku<"u"?function(e){return ku.resolve(null).then(e).catch(rm)}:aa;function rm(e){setTimeout(function(){throw e})}function go(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Hn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Hn(t)}function Vt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var dn=Math.random().toString(36).slice(2),ht="__reactFiber$"+dn,Qn="__reactProps$"+dn,St="__reactContainer$"+dn,la="__reactEvents$"+dn,nm="__reactListeners$"+dn,sm="__reactHandles$"+dn;function lr(e){var t=e[ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[St]||r[ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Su(e);e!==null;){if(r=e[ht])return r;e=Su(e)}return t}e=r,r=e.parentNode}return null}function hs(e){return e=e[ht]||e[St],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Pi(e){return e[Qn]||null}var ua=[],zr=-1;function Yt(e){return{current:e}}function G(e){0>zr||(e.current=ua[zr],ua[zr]=null,zr--)}function q(e,t){zr++,ua[zr]=e.current,e.current=t}var Jt={},be=Yt(Jt),Re=Yt(!1),pr=Jt;function rn(e,t){var r=e.type.contextTypes;if(!r)return Jt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pe(e){return e=e.childContextTypes,e!=null}function ui(){G(Re),G(be)}function Eu(e,t,r){if(be.current!==Jt)throw Error(j(168));q(be,t),q(Re,r)}function Ud(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(j(108,Bf(e)||"Unknown",s));return te({},r,n)}function ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jt,pr=be.current,q(be,e),q(Re,Re.current),!0}function ju(e,t,r){var n=e.stateNode;if(!n)throw Error(j(169));r?(e=Ud(e,t,pr),n.__reactInternalMemoizedMergedChildContext=e,G(Re),G(be),q(be,e)):G(Re),q(Re,r)}var wt=null,Ai=!1,vo=!1;function Dd(e){wt===null?wt=[e]:wt.push(e)}function im(e){Ai=!0,Dd(e)}function Xt(){if(!vo&&wt!==null){vo=!0;var e=0,t=W;try{var r=wt;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wt=null,Ai=!1}catch(s){throw wt!==null&&(wt=wt.slice(e+1)),ud(Xa,Xt),s}finally{W=t,vo=!1}}return null}var Br=[],Vr=0,di=null,hi=0,He=[],qe=0,mr=null,xt=1,_t="";function nr(e,t){Br[Vr++]=hi,Br[Vr++]=di,di=e,hi=t}function Md(e,t,r){He[qe++]=xt,He[qe++]=_t,He[qe++]=mr,mr=e;var n=xt;e=_t;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,xt=1<<32-ot(t)+s|r<<s|n,_t=i+e}else xt=1<<i|r<<s|n,_t=e}function al(e){e.return!==null&&(nr(e,1),Md(e,1,0))}function ll(e){for(;e===di;)di=Br[--Vr],Br[Vr]=null,hi=Br[--Vr],Br[Vr]=null;for(;e===mr;)mr=He[--qe],He[qe]=null,_t=He[--qe],He[qe]=null,xt=He[--qe],He[qe]=null}var Fe=null,Me=null,Y=!1,it=null;function Fd(e,t){var r=Ke(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Nu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,Me=Vt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,Me=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mr!==null?{id:xt,overflow:_t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ke(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fe=e,Me=null,!0):!1;default:return!1}}function ca(e){return(e.mode&1)!==0&&(e.flags&128)===0}function da(e){if(Y){var t=Me;if(t){var r=t;if(!Nu(e,t)){if(ca(e))throw Error(j(418));t=Vt(r.nextSibling);var n=Fe;t&&Nu(e,t)?Fd(n,r):(e.flags=e.flags&-4097|2,Y=!1,Fe=e)}}else{if(ca(e))throw Error(j(418));e.flags=e.flags&-4097|2,Y=!1,Fe=e}}}function Tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function Rs(e){if(e!==Fe)return!1;if(!Y)return Tu(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oa(e.type,e.memoizedProps)),t&&(t=Me)){if(ca(e))throw zd(),Error(j(418));for(;t;)Fd(e,t),t=Vt(t.nextSibling)}if(Tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Me=Vt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Me=null}}else Me=Fe?Vt(e.stateNode.nextSibling):null;return!0}function zd(){for(var e=Me;e;)e=Vt(e.nextSibling)}function nn(){Me=Fe=null,Y=!1}function ul(e){it===null?it=[e]:it.push(e)}var om=Nt.ReactCurrentBatchConfig;function wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(j(309));var n=r.stateNode}if(!n)throw Error(j(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(j(284));if(!r._owner)throw Error(j(290,e))}return e}function Ps(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cu(e){var t=e._init;return t(e._payload)}function Bd(e){function t(g,f){if(e){var v=g.deletions;v===null?(g.deletions=[f],g.flags|=16):v.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=Kt(g,f),g.index=0,g.sibling=null,g}function i(g,f,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<f?(g.flags|=2,f):v):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,f,v,w){return f===null||f.tag!==6?(f=So(v,g.mode,w),f.return=g,f):(f=s(f,v),f.return=g,f)}function l(g,f,v,w){var S=v.type;return S===Lr?d(g,f,v.props.children,w,v.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pt&&Cu(S)===f.type)?(w=s(f,v.props),w.ref=wn(g,f,v),w.return=g,w):(w=Zs(v.type,v.key,v.props,null,g.mode,w),w.ref=wn(g,f,v),w.return=g,w)}function c(g,f,v,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==v.containerInfo||f.stateNode.implementation!==v.implementation?(f=Eo(v,g.mode,w),f.return=g,f):(f=s(f,v.children||[]),f.return=g,f)}function d(g,f,v,w,S){return f===null||f.tag!==7?(f=fr(v,g.mode,w,S),f.return=g,f):(f=s(f,v),f.return=g,f)}function p(g,f,v){if(typeof f=="string"&&f!==""||typeof f=="number")return f=So(""+f,g.mode,v),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case _s:return v=Zs(f.type,f.key,f.props,null,g.mode,v),v.ref=wn(g,null,f),v.return=g,v;case $r:return f=Eo(f,g.mode,v),f.return=g,f;case Pt:var w=f._init;return p(g,w(f._payload),v)}if(En(f)||pn(f))return f=fr(f,g.mode,v,null),f.return=g,f;Ps(g,f)}return null}function h(g,f,v,w){var S=f!==null?f.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(g,f,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _s:return v.key===S?l(g,f,v,w):null;case $r:return v.key===S?c(g,f,v,w):null;case Pt:return S=v._init,h(g,f,S(v._payload),w)}if(En(v)||pn(v))return S!==null?null:d(g,f,v,w,null);Ps(g,v)}return null}function m(g,f,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,a(f,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _s:return g=g.get(w.key===null?v:w.key)||null,l(f,g,w,S);case $r:return g=g.get(w.key===null?v:w.key)||null,c(f,g,w,S);case Pt:var b=w._init;return m(g,f,v,b(w._payload),S)}if(En(w)||pn(w))return g=g.get(v)||null,d(f,g,w,S,null);Ps(f,w)}return null}function y(g,f,v,w){for(var S=null,b=null,E=f,N=f=0,A=null;E!==null&&N<v.length;N++){E.index>N?(A=E,E=null):A=E.sibling;var I=h(g,E,v[N],w);if(I===null){E===null&&(E=A);break}e&&E&&I.alternate===null&&t(g,E),f=i(I,f,N),b===null?S=I:b.sibling=I,b=I,E=A}if(N===v.length)return r(g,E),Y&&nr(g,N),S;if(E===null){for(;N<v.length;N++)E=p(g,v[N],w),E!==null&&(f=i(E,f,N),b===null?S=E:b.sibling=E,b=E);return Y&&nr(g,N),S}for(E=n(g,E);N<v.length;N++)A=m(E,g,N,v[N],w),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?N:A.key),f=i(A,f,N),b===null?S=A:b.sibling=A,b=A);return e&&E.forEach(function(J){return t(g,J)}),Y&&nr(g,N),S}function _(g,f,v,w){var S=pn(v);if(typeof S!="function")throw Error(j(150));if(v=S.call(v),v==null)throw Error(j(151));for(var b=S=null,E=f,N=f=0,A=null,I=v.next();E!==null&&!I.done;N++,I=v.next()){E.index>N?(A=E,E=null):A=E.sibling;var J=h(g,E,I.value,w);if(J===null){E===null&&(E=A);break}e&&E&&J.alternate===null&&t(g,E),f=i(J,f,N),b===null?S=J:b.sibling=J,b=J,E=A}if(I.done)return r(g,E),Y&&nr(g,N),S;if(E===null){for(;!I.done;N++,I=v.next())I=p(g,I.value,w),I!==null&&(f=i(I,f,N),b===null?S=I:b.sibling=I,b=I);return Y&&nr(g,N),S}for(E=n(g,E);!I.done;N++,I=v.next())I=m(E,g,N,I.value,w),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?N:I.key),f=i(I,f,N),b===null?S=I:b.sibling=I,b=I);return e&&E.forEach(function(Ct){return t(g,Ct)}),Y&&nr(g,N),S}function k(g,f,v,w){if(typeof v=="object"&&v!==null&&v.type===Lr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _s:e:{for(var S=v.key,b=f;b!==null;){if(b.key===S){if(S=v.type,S===Lr){if(b.tag===7){r(g,b.sibling),f=s(b,v.props.children),f.return=g,g=f;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pt&&Cu(S)===b.type){r(g,b.sibling),f=s(b,v.props),f.ref=wn(g,b,v),f.return=g,g=f;break e}r(g,b);break}else t(g,b);b=b.sibling}v.type===Lr?(f=fr(v.props.children,g.mode,w,v.key),f.return=g,g=f):(w=Zs(v.type,v.key,v.props,null,g.mode,w),w.ref=wn(g,f,v),w.return=g,g=w)}return o(g);case $r:e:{for(b=v.key;f!==null;){if(f.key===b)if(f.tag===4&&f.stateNode.containerInfo===v.containerInfo&&f.stateNode.implementation===v.implementation){r(g,f.sibling),f=s(f,v.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=Eo(v,g.mode,w),f.return=g,g=f}return o(g);case Pt:return b=v._init,k(g,f,b(v._payload),w)}if(En(v))return y(g,f,v,w);if(pn(v))return _(g,f,v,w);Ps(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,f!==null&&f.tag===6?(r(g,f.sibling),f=s(f,v),f.return=g,g=f):(r(g,f),f=So(v,g.mode,w),f.return=g,g=f),o(g)):r(g,f)}return k}var sn=Bd(!0),Vd=Bd(!1),fi=Yt(null),pi=null,Wr=null,cl=null;function dl(){cl=Wr=pi=null}function hl(e){var t=fi.current;G(fi),e._currentValue=t}function ha(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Xr(e,t){pi=e,cl=Wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oe=!0),e.firstContext=null)}function Je(e){var t=e._currentValue;if(cl!==e)if(e={context:e,memoizedValue:t,next:null},Wr===null){if(pi===null)throw Error(j(308));Wr=e,pi.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var ur=null;function fl(e){ur===null?ur=[e]:ur.push(e)}function Wd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,fl(t)):(r.next=s.next,s.next=r),t.interleaved=r,Et(e,n)}function Et(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function pl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Et(e,r)}return s=n.interleaved,s===null?(t.next=t,fl(n)):(t.next=s.next,s.next=t),n.interleaved=t,Et(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Za(e,r)}}function Ou(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function mi(e,t,r,n){var s=e.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=c=l=null,a=i;do{var h=a.lane,m=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,_=a;switch(h=t,m=r,_.tag){case 1:if(y=_.payload,typeof y=="function"){p=y.call(m,p,h);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,h=typeof y=="function"?y.call(m,p,h):y,h==null)break e;p=te({},p,h);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=p):d=d.next=m,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=p}}function Ru(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(j(191,s));s.call(n)}}}var fs={},pt=Yt(fs),Yn=Yt(fs),Xn=Yt(fs);function cr(e){if(e===fs)throw Error(j(174));return e}function ml(e,t){switch(q(Xn,t),q(Yn,e),q(pt,fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qo(t,e)}G(pt),q(pt,t)}function on(){G(pt),G(Yn),G(Xn)}function qd(e){cr(Xn.current);var t=cr(pt.current),r=qo(t,e.type);t!==r&&(q(Yn,e),q(pt,r))}function gl(e){Yn.current===e&&(G(pt),G(Yn))}var Z=Yt(0);function gi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=[];function vl(){for(var e=0;e<yo.length;e++)yo[e]._workInProgressVersionPrimary=null;yo.length=0}var Gs=Nt.ReactCurrentDispatcher,wo=Nt.ReactCurrentBatchConfig,gr=0,ee=null,ue=null,de=null,vi=!1,In=!1,Zn=0,am=0;function we(){throw Error(j(321))}function yl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function wl(e,t,r,n,s,i){if(gr=i,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gs.current=e===null||e.memoizedState===null?dm:hm,e=r(n,s),In){i=0;do{if(In=!1,Zn=0,25<=i)throw Error(j(301));i+=1,de=ue=null,t.updateQueue=null,Gs.current=fm,e=r(n,s)}while(In)}if(Gs.current=yi,t=ue!==null&&ue.next!==null,gr=0,de=ue=ee=null,vi=!1,t)throw Error(j(300));return e}function xl(){var e=Zn!==0;return Zn=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ee.memoizedState=de=e:de=de.next=e,de}function Qe(){if(ue===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=ue.next;var t=de===null?ee.memoizedState:de.next;if(t!==null)de=t,ue=e;else{if(e===null)throw Error(j(310));ue=e,e={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},de===null?ee.memoizedState=de=e:de=de.next=e}return de}function es(e,t){return typeof t=="function"?t(e):t}function xo(e){var t=Qe(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=ue,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((gr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=n):l=l.next=p,ee.lanes|=d,vr|=d}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,lt(n,t.memoizedState)||(Oe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ee.lanes|=i,vr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _o(e){var t=Qe(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);lt(i,t.memoizedState)||(Oe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Kd(){}function Gd(e,t){var r=ee,n=Qe(),s=t(),i=!lt(n.memoizedState,s);if(i&&(n.memoizedState=s,Oe=!0),n=n.queue,_l(Yd.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||de!==null&&de.memoizedState.tag&1){if(r.flags|=2048,ts(9,Qd.bind(null,r,n,s,t),void 0,null),he===null)throw Error(j(349));gr&30||Jd(r,t,s)}return s}function Jd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Qd(e,t,r,n){t.value=r,t.getSnapshot=n,Xd(t)&&Zd(e)}function Yd(e,t,r){return r(function(){Xd(t)&&Zd(e)})}function Xd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function Zd(e){var t=Et(e,1);t!==null&&at(t,e,1,-1)}function Pu(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=cm.bind(null,ee,e),[t.memoizedState,e]}function ts(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function eh(){return Qe().memoizedState}function Js(e,t,r,n){var s=dt();ee.flags|=e,s.memoizedState=ts(1|t,r,void 0,n===void 0?null:n)}function Ii(e,t,r,n){var s=Qe();n=n===void 0?null:n;var i=void 0;if(ue!==null){var o=ue.memoizedState;if(i=o.destroy,n!==null&&yl(n,o.deps)){s.memoizedState=ts(t,r,i,n);return}}ee.flags|=e,s.memoizedState=ts(1|t,r,i,n)}function Au(e,t){return Js(8390656,8,e,t)}function _l(e,t){return Ii(2048,8,e,t)}function th(e,t){return Ii(4,2,e,t)}function rh(e,t){return Ii(4,4,e,t)}function nh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sh(e,t,r){return r=r!=null?r.concat([e]):null,Ii(4,4,nh.bind(null,t,e),r)}function bl(){}function ih(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function oh(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ah(e,t,r){return gr&21?(lt(r,t)||(r=hd(),ee.lanes|=r,vr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oe=!0),e.memoizedState=r)}function lm(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=wo.transition;wo.transition={};try{e(!1),t()}finally{W=r,wo.transition=n}}function lh(){return Qe().memoizedState}function um(e,t,r){var n=qt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},uh(e))ch(t,r);else if(r=Wd(e,t,r,n),r!==null){var s=Ee();at(r,e,n,s),dh(r,t,n)}}function cm(e,t,r){var n=qt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(uh(e))ch(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,lt(a,o)){var l=t.interleaved;l===null?(s.next=s,fl(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Wd(e,t,s,n),r!==null&&(s=Ee(),at(r,e,n,s),dh(r,t,n))}}function uh(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function ch(e,t){In=vi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function dh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Za(e,r)}}var yi={readContext:Je,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},dm={readContext:Je,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Je,useEffect:Au,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Js(4194308,4,nh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var r=dt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=um.bind(null,ee,e),[n.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:Pu,useDebugValue:bl,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=Pu(!1),t=e[0];return e=lm.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ee,s=dt();if(Y){if(r===void 0)throw Error(j(407));r=r()}else{if(r=t(),he===null)throw Error(j(349));gr&30||Jd(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Au(Yd.bind(null,n,i,e),[e]),n.flags|=2048,ts(9,Qd.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=dt(),t=he.identifierPrefix;if(Y){var r=_t,n=xt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=am++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hm={readContext:Je,useCallback:ih,useContext:Je,useEffect:_l,useImperativeHandle:sh,useInsertionEffect:th,useLayoutEffect:rh,useMemo:oh,useReducer:xo,useRef:eh,useState:function(){return xo(es)},useDebugValue:bl,useDeferredValue:function(e){var t=Qe();return ah(t,ue.memoizedState,e)},useTransition:function(){var e=xo(es)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:lh,unstable_isNewReconciler:!1},fm={readContext:Je,useCallback:ih,useContext:Je,useEffect:_l,useImperativeHandle:sh,useInsertionEffect:th,useLayoutEffect:rh,useMemo:oh,useReducer:_o,useRef:eh,useState:function(){return _o(es)},useDebugValue:bl,useDeferredValue:function(e){var t=Qe();return ue===null?t.memoizedState=e:ah(t,ue.memoizedState,e)},useTransition:function(){var e=_o(es)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Kd,useSyncExternalStore:Gd,useId:lh,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=te({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fa(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:te({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $i={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ee(),s=qt(e),i=bt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(at(t,e,s,n),Ks(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ee(),s=qt(e),i=bt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Wt(e,i,s),t!==null&&(at(t,e,s,n),Ks(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ee(),n=qt(e),s=bt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Wt(e,s,n),t!==null&&(at(t,e,n,r),Ks(t,e,n))}};function Iu(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Kn(r,n)||!Kn(s,i):!0}function hh(e,t,r){var n=!1,s=Jt,i=t.contextType;return typeof i=="object"&&i!==null?i=Je(i):(s=Pe(t)?pr:be.current,n=t.contextTypes,i=(n=n!=null)?rn(e,s):Jt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$i,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function $u(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&$i.enqueueReplaceState(t,t.state,null)}function pa(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},pl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Je(i):(i=Pe(t)?pr:be.current,s.context=rn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fa(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&$i.enqueueReplaceState(s,s.state,null),mi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function an(e,t){try{var r="",n=t;do r+=zf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function bo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pm=typeof WeakMap=="function"?WeakMap:Map;function fh(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){xi||(xi=!0,Ea=n),ma(e,t)},r}function ph(e,t,r){r=bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ma(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ma(e,t),typeof n!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Lu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new pm;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Tm.bind(null,e,t,r),t.then(e,e))}function Uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Du(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Wt(r,t,1))),r.lanes|=1),e)}var mm=Nt.ReactCurrentOwner,Oe=!1;function Se(e,t,r,n){t.child=e===null?Vd(t,null,r,n):sn(t,e.child,r,n)}function Mu(e,t,r,n,s){r=r.render;var i=t.ref;return Xr(t,s),n=wl(e,t,r,n,i,s),r=xl(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jt(e,t,s)):(Y&&r&&al(t),t.flags|=1,Se(e,t,n,s),t.child)}function Fu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Ol(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,mh(e,t,i,n,s)):(e=Zs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Kn,r(o,n)&&e.ref===t.ref)return jt(e,t,s)}return t.flags|=1,e=Kt(i,n),e.ref=t.ref,e.return=t,t.child=e}function mh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Kn(i,n)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Oe=!0);else return t.lanes=e.lanes,jt(e,t,s)}return ga(e,t,r,n,s)}function gh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(qr,Le),Le|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(qr,Le),Le|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,q(qr,Le),Le|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,q(qr,Le),Le|=n;return Se(e,t,s,r),t.child}function vh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ga(e,t,r,n,s){var i=Pe(r)?pr:be.current;return i=rn(t,i),Xr(t,s),r=wl(e,t,r,n,i,s),n=xl(),e!==null&&!Oe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jt(e,t,s)):(Y&&n&&al(t),t.flags|=1,Se(e,t,r,s),t.child)}function zu(e,t,r,n,s){if(Pe(r)){var i=!0;ci(t)}else i=!1;if(Xr(t,s),t.stateNode===null)Qs(e,t),hh(t,r,n),pa(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Je(c):(c=Pe(r)?pr:be.current,c=rn(t,c));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&$u(t,o,n,c),At=!1;var h=t.memoizedState;o.state=h,mi(t,n,o,s),l=t.memoizedState,a!==n||h!==l||Re.current||At?(typeof d=="function"&&(fa(t,r,d,n),l=t.memoizedState),(a=At||Iu(t,r,a,n,h,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Hd(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:tt(t.type,a),o.props=c,p=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Je(l):(l=Pe(r)?pr:be.current,l=rn(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||h!==l)&&$u(t,o,n,l),At=!1,h=t.memoizedState,o.state=h,mi(t,n,o,s);var y=t.memoizedState;a!==p||h!==y||Re.current||At?(typeof m=="function"&&(fa(t,r,m,n),y=t.memoizedState),(c=At||Iu(t,r,c,n,h,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return va(e,t,r,n,i,s)}function va(e,t,r,n,s,i){vh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&ju(t,r,!1),jt(e,t,i);n=t.stateNode,mm.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=sn(t,e.child,null,i),t.child=sn(t,null,a,i)):Se(e,t,a,i),t.memoizedState=n.state,s&&ju(t,r,!0),t.child}function yh(e){var t=e.stateNode;t.pendingContext?Eu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Eu(e,t.context,!1),ml(e,t.containerInfo)}function Bu(e,t,r,n,s){return nn(),ul(s),t.flags|=256,Se(e,t,r,n),t.child}var ya={dehydrated:null,treeContext:null,retryLane:0};function wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function wh(e,t,r){var n=t.pendingProps,s=Z.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(Z,s&1),e===null)return da(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Di(o,n,0,null),e=fr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wa(r),t.memoizedState=ya,e):kl(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gm(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Kt(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Kt(a,i):(i=fr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?wa(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ya,n}return i=e.child,e=i.sibling,n=Kt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function kl(e,t){return t=Di({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function As(e,t,r,n){return n!==null&&ul(n),sn(t,e.child,null,r),e=kl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gm(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=bo(Error(j(422))),As(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Di({mode:"visible",children:n.children},s,0,null),i=fr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&sn(t,e.child,null,o),t.child.memoizedState=wa(o),t.memoizedState=ya,i);if(!(t.mode&1))return As(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(j(419)),n=bo(i,n,void 0),As(e,t,o,n)}if(a=(o&e.childLanes)!==0,Oe||a){if(n=he,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Et(e,s),at(n,e,s,-1))}return Cl(),n=bo(Error(j(421))),As(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Cm.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Me=Vt(s.nextSibling),Fe=t,Y=!0,it=null,e!==null&&(He[qe++]=xt,He[qe++]=_t,He[qe++]=mr,xt=e.id,_t=e.overflow,mr=t),t=kl(t,n.children),t.flags|=4096,t)}function Vu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ha(e.return,t,r)}function ko(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function xh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Se(e,t,n.children,r),n=Z.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vu(e,r,t);else if(e.tag===19)Vu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(q(Z,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&gi(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ko(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&gi(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ko(t,!0,r,null,i);break;case"together":ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,r=Kt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vm(e,t,r){switch(t.tag){case 3:yh(t),nn();break;case 5:qd(t);break;case 1:Pe(t.type)&&ci(t);break;case 4:ml(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;q(fi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(q(Z,Z.current&1),t.flags|=128,null):r&t.child.childLanes?wh(e,t,r):(q(Z,Z.current&1),e=jt(e,t,r),e!==null?e.sibling:null);q(Z,Z.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return xh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(Z,Z.current),n)break;return null;case 22:case 23:return t.lanes=0,gh(e,t,r)}return jt(e,t,r)}var _h,xa,bh,kh;_h=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xa=function(){};bh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,cr(pt.current);var i=null;switch(r){case"input":s=Bo(e,s),n=Bo(e,n),i=[];break;case"select":s=te({},s,{value:void 0}),n=te({},n,{value:void 0}),i=[];break;case"textarea":s=Ho(e,s),n=Ho(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=li)}Ko(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fn.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&K("scroll",e),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};kh=function(e,t,r,n){r!==n&&(t.flags|=4)};function xn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ym(e,t,r){var n=t.pendingProps;switch(ll(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(t),null;case 1:return Pe(t.type)&&ui(),xe(t),null;case 3:return n=t.stateNode,on(),G(Re),G(be),vl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Rs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(Ta(it),it=null))),xa(e,t),xe(t),null;case 5:gl(t);var s=cr(Xn.current);if(r=t.type,e!==null&&t.stateNode!=null)bh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(j(166));return xe(t),null}if(e=cr(pt.current),Rs(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ht]=t,n[Qn]=i,e=(t.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<Nn.length;s++)K(Nn[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":Xl(n,i),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},K("invalid",n);break;case"textarea":eu(n,i),K("invalid",n)}Ko(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,a,e),s=["children",""+a]):Fn.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&K("scroll",n)}switch(r){case"input":bs(n),Zl(n,i,!0);break;case"textarea":bs(n),tu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=li)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ht]=t,e[Qn]=n,_h(e,t,!1,!1),t.stateNode=e;e:{switch(o=Go(r,n),r){case"dialog":K("cancel",e),K("close",e),s=n;break;case"iframe":case"object":case"embed":K("load",e),s=n;break;case"video":case"audio":for(s=0;s<Nn.length;s++)K(Nn[s],e);s=n;break;case"source":K("error",e),s=n;break;case"img":case"image":case"link":K("error",e),K("load",e),s=n;break;case"details":K("toggle",e),s=n;break;case"input":Xl(e,n),s=Bo(e,n),K("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=te({},n,{value:void 0}),K("invalid",e);break;case"textarea":eu(e,n),s=Ho(e,n),K("invalid",e);break;default:s=n}Ko(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ed(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xc(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&zn(e,l):typeof l=="number"&&zn(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&K("scroll",e):l!=null&&Ka(e,i,l,o))}switch(r){case"input":bs(e),Zl(e,n,!1);break;case"textarea":bs(e),tu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Gr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Gr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=li)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xe(t),null;case 6:if(e&&t.stateNode!=null)kh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(j(166));if(r=cr(Xn.current),cr(pt.current),Rs(t)){if(n=t.stateNode,r=t.memoizedProps,n[ht]=t,(i=n.nodeValue!==r)&&(e=Fe,e!==null))switch(e.tag){case 3:Os(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ht]=t,t.stateNode=n}return xe(t),null;case 13:if(G(Z),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&Me!==null&&t.mode&1&&!(t.flags&128))zd(),nn(),t.flags|=98560,i=!1;else if(i=Rs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(j(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[ht]=t}else nn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xe(t),i=!1}else it!==null&&(Ta(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?ce===0&&(ce=3):Cl())),t.updateQueue!==null&&(t.flags|=4),xe(t),null);case 4:return on(),xa(e,t),e===null&&Gn(t.stateNode.containerInfo),xe(t),null;case 10:return hl(t.type._context),xe(t),null;case 17:return Pe(t.type)&&ui(),xe(t),null;case 19:if(G(Z),i=t.memoizedState,i===null)return xe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)xn(i,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=gi(e),o!==null){for(t.flags|=128,xn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return q(Z,Z.current&1|2),t.child}e=e.sibling}i.tail!==null&&se()>ln&&(t.flags|=128,n=!0,xn(i,!1),t.lanes=4194304)}else{if(!n)if(e=gi(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return xe(t),null}else 2*se()-i.renderingStartTime>ln&&r!==1073741824&&(t.flags|=128,n=!0,xn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=se(),t.sibling=null,r=Z.current,q(Z,n?r&1|2:r&1),t):(xe(t),null);case 22:case 23:return Tl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Le&1073741824&&(xe(t),t.subtreeFlags&6&&(t.flags|=8192)):xe(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function wm(e,t){switch(ll(t),t.tag){case 1:return Pe(t.type)&&ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return on(),G(Re),G(be),vl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gl(t),null;case 13:if(G(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(Z),null;case 4:return on(),null;case 10:return hl(t.type._context),null;case 22:case 23:return Tl(),null;case 24:return null;default:return null}}var Is=!1,_e=!1,xm=typeof WeakSet=="function"?WeakSet:Set,O=null;function Hr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ne(e,t,n)}else r.current=null}function _a(e,t,r){try{r()}catch(n){ne(e,t,n)}}var Wu=!1;function _m(e,t){if(sa=ii,e=Td(),ol(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=e,h=null;t:for(;;){for(var m;p!==r||s!==0&&p.nodeType!==3||(a=o+s),p!==i||n!==0&&p.nodeType!==3||(l=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===e)break t;if(h===r&&++c===s&&(a=o),h===i&&++d===n&&(l=o),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ia={focusedElem:e,selectionRange:r},ii=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,k=y.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?_:tt(t.type,_),k);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(w){ne(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return y=Wu,Wu=!1,y}function $n(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&_a(t,r,i)}s=s.next}while(s!==n)}}function Li(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ba(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Sh(e){var t=e.alternate;t!==null&&(e.alternate=null,Sh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ht],delete t[Qn],delete t[la],delete t[nm],delete t[sm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eh(e){return e.tag===5||e.tag===3||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ka(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=li));else if(n!==4&&(e=e.child,e!==null))for(ka(e,t,r),e=e.sibling;e!==null;)ka(e,t,r),e=e.sibling}function Sa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sa(e,t,r),e=e.sibling;e!==null;)Sa(e,t,r),e=e.sibling}var me=null,nt=!1;function Ot(e,t,r){for(r=r.child;r!==null;)jh(e,t,r),r=r.sibling}function jh(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Ti,r)}catch{}switch(r.tag){case 5:_e||Hr(r,t);case 6:var n=me,s=nt;me=null,Ot(e,t,r),me=n,nt=s,me!==null&&(nt?(e=me,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(nt?(e=me,r=r.stateNode,e.nodeType===8?go(e.parentNode,r):e.nodeType===1&&go(e,r),Hn(e)):go(me,r.stateNode));break;case 4:n=me,s=nt,me=r.stateNode.containerInfo,nt=!0,Ot(e,t,r),me=n,nt=s;break;case 0:case 11:case 14:case 15:if(!_e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_a(r,t,o),s=s.next}while(s!==n)}Ot(e,t,r);break;case 1:if(!_e&&(Hr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ne(r,t,a)}Ot(e,t,r);break;case 21:Ot(e,t,r);break;case 22:r.mode&1?(_e=(n=_e)||r.memoizedState!==null,Ot(e,t,r),_e=n):Ot(e,t,r);break;default:Ot(e,t,r)}}function qu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xm),t.forEach(function(n){var s=Om.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:me=a.stateNode,nt=!1;break e;case 3:me=a.stateNode.containerInfo,nt=!0;break e;case 4:me=a.stateNode.containerInfo,nt=!0;break e}a=a.return}if(me===null)throw Error(j(160));jh(i,o,s),me=null,nt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ne(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nh(t,e),t=t.sibling}function Nh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ct(e),n&4){try{$n(3,e,e.return),Li(3,e)}catch(_){ne(e,e.return,_)}try{$n(5,e,e.return)}catch(_){ne(e,e.return,_)}}break;case 1:Ze(t,e),ct(e),n&512&&r!==null&&Hr(r,r.return);break;case 5:if(Ze(t,e),ct(e),n&512&&r!==null&&Hr(r,r.return),e.flags&32){var s=e.stateNode;try{zn(s,"")}catch(_){ne(e,e.return,_)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Jc(s,i),Go(a,o);var c=Go(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?ed(s,p):d==="dangerouslySetInnerHTML"?Xc(s,p):d==="children"?zn(s,p):Ka(s,d,p,c)}switch(a){case"input":Vo(s,i);break;case"textarea":Qc(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Gr(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Gr(s,!!i.multiple,i.defaultValue,!0):Gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qn]=i}catch(_){ne(e,e.return,_)}}break;case 6:if(Ze(t,e),ct(e),n&4){if(e.stateNode===null)throw Error(j(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(_){ne(e,e.return,_)}}break;case 3:if(Ze(t,e),ct(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hn(t.containerInfo)}catch(_){ne(e,e.return,_)}break;case 4:Ze(t,e),ct(e);break;case 13:Ze(t,e),ct(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jl=se())),n&4&&qu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(_e=(c=_e)||d,Ze(t,e),_e=c):Ze(t,e),ct(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(O=e,d=e.child;d!==null;){for(p=O=d;O!==null;){switch(h=O,m=h.child,h.tag){case 0:case 11:case 14:case 15:$n(4,h,h.return);break;case 1:Hr(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){ne(n,r,_)}}break;case 5:Hr(h,h.return);break;case 22:if(h.memoizedState!==null){Gu(p);continue}}m!==null?(m.return=h,O=m):Gu(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Zc("display",o))}catch(_){ne(e,e.return,_)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(_){ne(e,e.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ze(t,e),ct(e),n&4&&qu(e);break;case 21:break;default:Ze(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Eh(r)){var n=r;break e}r=r.return}throw Error(j(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(zn(s,""),n.flags&=-33);var i=Hu(e);Sa(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Hu(e);ka(e,a,o);break;default:throw Error(j(161))}}catch(l){ne(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bm(e,t,r){O=e,Th(e)}function Th(e,t,r){for(var n=(e.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Is;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_e;a=Is;var c=_e;if(Is=o,(_e=l)&&!c)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?Ju(s):l!==null?(l.return=o,O=l):Ju(s);for(;i!==null;)O=i,Th(i),i=i.sibling;O=s,Is=a,_e=c}Ku(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):Ku(e)}}function Ku(e){for(;O!==null;){var t=O;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_e||Li(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_e)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ru(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ru(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Hn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}_e||t.flags&512&&ba(t)}catch(h){ne(t,t.return,h)}}if(t===e){O=null;break}if(r=t.sibling,r!==null){r.return=t.return,O=r;break}O=t.return}}function Gu(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var r=t.sibling;if(r!==null){r.return=t.return,O=r;break}O=t.return}}function Ju(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Li(4,t)}catch(l){ne(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){ne(t,s,l)}}var i=t.return;try{ba(t)}catch(l){ne(t,i,l)}break;case 5:var o=t.return;try{ba(t)}catch(l){ne(t,o,l)}}}catch(l){ne(t,t.return,l)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var km=Math.ceil,wi=Nt.ReactCurrentDispatcher,Sl=Nt.ReactCurrentOwner,Ge=Nt.ReactCurrentBatchConfig,V=0,he=null,ae=null,ge=0,Le=0,qr=Yt(0),ce=0,rs=null,vr=0,Ui=0,El=0,Ln=null,Ce=null,jl=0,ln=1/0,vt=null,xi=!1,Ea=null,Ht=null,$s=!1,Mt=null,_i=0,Un=0,ja=null,Ys=-1,Xs=0;function Ee(){return V&6?se():Ys!==-1?Ys:Ys=se()}function qt(e){return e.mode&1?V&2&&ge!==0?ge&-ge:om.transition!==null?(Xs===0&&(Xs=hd()),Xs):(e=W,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function at(e,t,r,n){if(50<Un)throw Un=0,ja=null,Error(j(185));cs(e,r,n),(!(V&2)||e!==he)&&(e===he&&(!(V&2)&&(Ui|=r),ce===4&&Lt(e,ge)),Ae(e,n),r===1&&V===0&&!(t.mode&1)&&(ln=se()+500,Ai&&Xt()))}function Ae(e,t){var r=e.callbackNode;op(e,t);var n=si(e,e===he?ge:0);if(n===0)r!==null&&su(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&su(r),t===1)e.tag===0?im(Qu.bind(null,e)):Dd(Qu.bind(null,e)),tm(function(){!(V&6)&&Xt()}),r=null;else{switch(fd(n)){case 1:r=Xa;break;case 4:r=cd;break;case 16:r=ni;break;case 536870912:r=dd;break;default:r=ni}r=Lh(r,Ch.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ch(e,t){if(Ys=-1,Xs=0,V&6)throw Error(j(327));var r=e.callbackNode;if(Zr()&&e.callbackNode!==r)return null;var n=si(e,e===he?ge:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=bi(e,n);else{t=n;var s=V;V|=2;var i=Rh();(he!==e||ge!==t)&&(vt=null,ln=se()+500,hr(e,t));do try{jm();break}catch(a){Oh(e,a)}while(!0);dl(),wi.current=i,V=s,ae!==null?t=0:(he=null,ge=0,t=ce)}if(t!==0){if(t===2&&(s=Zo(e),s!==0&&(n=s,t=Na(e,s))),t===1)throw r=rs,hr(e,0),Lt(e,n),Ae(e,se()),r;if(t===6)Lt(e,n);else{if(s=e.current.alternate,!(n&30)&&!Sm(s)&&(t=bi(e,n),t===2&&(i=Zo(e),i!==0&&(n=i,t=Na(e,i))),t===1))throw r=rs,hr(e,0),Lt(e,n),Ae(e,se()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(j(345));case 2:sr(e,Ce,vt);break;case 3:if(Lt(e,n),(n&130023424)===n&&(t=jl+500-se(),10<t)){if(si(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ee(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=aa(sr.bind(null,e,Ce,vt),t);break}sr(e,Ce,vt);break;case 4:if(Lt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*km(n/1960))-n,10<n){e.timeoutHandle=aa(sr.bind(null,e,Ce,vt),n);break}sr(e,Ce,vt);break;case 5:sr(e,Ce,vt);break;default:throw Error(j(329))}}}return Ae(e,se()),e.callbackNode===r?Ch.bind(null,e):null}function Na(e,t){var r=Ln;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=bi(e,t),e!==2&&(t=Ce,Ce=r,t!==null&&Ta(t)),e}function Ta(e){Ce===null?Ce=e:Ce.push.apply(Ce,e)}function Sm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!lt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lt(e,t){for(t&=~El,t&=~Ui,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function Qu(e){if(V&6)throw Error(j(327));Zr();var t=si(e,0);if(!(t&1))return Ae(e,se()),null;var r=bi(e,t);if(e.tag!==0&&r===2){var n=Zo(e);n!==0&&(t=n,r=Na(e,n))}if(r===1)throw r=rs,hr(e,0),Lt(e,t),Ae(e,se()),r;if(r===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Ce,vt),Ae(e,se()),null}function Nl(e,t){var r=V;V|=1;try{return e(t)}finally{V=r,V===0&&(ln=se()+500,Ai&&Xt())}}function yr(e){Mt!==null&&Mt.tag===0&&!(V&6)&&Zr();var t=V;V|=1;var r=Ge.transition,n=W;try{if(Ge.transition=null,W=1,e)return e()}finally{W=n,Ge.transition=r,V=t,!(V&6)&&Xt()}}function Tl(){Le=qr.current,G(qr)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,em(r)),ae!==null)for(r=ae.return;r!==null;){var n=r;switch(ll(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ui();break;case 3:on(),G(Re),G(be),vl();break;case 5:gl(n);break;case 4:on();break;case 13:G(Z);break;case 19:G(Z);break;case 10:hl(n.type._context);break;case 22:case 23:Tl()}r=r.return}if(he=e,ae=e=Kt(e.current,null),ge=Le=t,ce=0,rs=null,El=Ui=vr=0,Ce=Ln=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ur=null}return e}function Oh(e,t){do{var r=ae;try{if(dl(),Gs.current=yi,vi){for(var n=ee.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}vi=!1}if(gr=0,de=ue=ee=null,In=!1,Zn=0,Sl.current=null,r===null||r.return===null){ce=1,rs=t,ae=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=ge,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Uu(o);if(m!==null){m.flags&=-257,Du(m,o,a,i,t),m.mode&1&&Lu(i,c,t),t=m,l=c;var y=t.updateQueue;if(y===null){var _=new Set;_.add(l),t.updateQueue=_}else y.add(l);break e}else{if(!(t&1)){Lu(i,c,t),Cl();break e}l=Error(j(426))}}else if(Y&&a.mode&1){var k=Uu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Du(k,o,a,i,t),ul(an(l,a));break e}}i=l=an(l,a),ce!==4&&(ce=2),Ln===null?Ln=[i]:Ln.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=fh(i,l,t);Ou(i,g);break e;case 1:a=l;var f=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ht===null||!Ht.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=ph(i,a,t);Ou(i,w);break e}}i=i.return}while(i!==null)}Ah(r)}catch(S){t=S,ae===r&&r!==null&&(ae=r=r.return);continue}break}while(!0)}function Rh(){var e=wi.current;return wi.current=yi,e===null?yi:e}function Cl(){(ce===0||ce===3||ce===2)&&(ce=4),he===null||!(vr&268435455)&&!(Ui&268435455)||Lt(he,ge)}function bi(e,t){var r=V;V|=2;var n=Rh();(he!==e||ge!==t)&&(vt=null,hr(e,t));do try{Em();break}catch(s){Oh(e,s)}while(!0);if(dl(),V=r,wi.current=n,ae!==null)throw Error(j(261));return he=null,ge=0,ce}function Em(){for(;ae!==null;)Ph(ae)}function jm(){for(;ae!==null&&!Yf();)Ph(ae)}function Ph(e){var t=$h(e.alternate,e,Le);e.memoizedProps=e.pendingProps,t===null?Ah(e):ae=t,Sl.current=null}function Ah(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=wm(r,t),r!==null){r.flags&=32767,ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,ae=null;return}}else if(r=ym(r,t,Le),r!==null){ae=r;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);ce===0&&(ce=5)}function sr(e,t,r){var n=W,s=Ge.transition;try{Ge.transition=null,W=1,Nm(e,t,r,n)}finally{Ge.transition=s,W=n}return null}function Nm(e,t,r,n){do Zr();while(Mt!==null);if(V&6)throw Error(j(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ap(e,i),e===he&&(ae=he=null,ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$s||($s=!0,Lh(ni,function(){return Zr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ge.transition,Ge.transition=null;var o=W;W=1;var a=V;V|=4,Sl.current=null,_m(e,r),Nh(r,e),Kp(ia),ii=!!sa,ia=sa=null,e.current=r,bm(r),Xf(),V=a,W=o,Ge.transition=i}else e.current=r;if($s&&($s=!1,Mt=e,_i=s),i=e.pendingLanes,i===0&&(Ht=null),tp(r.stateNode),Ae(e,se()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(xi)throw xi=!1,e=Ea,Ea=null,e;return _i&1&&e.tag!==0&&Zr(),i=e.pendingLanes,i&1?e===ja?Un++:(Un=0,ja=e):Un=0,Xt(),null}function Zr(){if(Mt!==null){var e=fd(_i),t=Ge.transition,r=W;try{if(Ge.transition=null,W=16>e?16:e,Mt===null)var n=!1;else{if(e=Mt,Mt=null,_i=0,V&6)throw Error(j(331));var s=V;for(V|=4,O=e.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(O=c;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:$n(8,d,i)}var p=d.child;if(p!==null)p.return=d,O=p;else for(;O!==null;){d=O;var h=d.sibling,m=d.return;if(Sh(d),d===c){O=null;break}if(h!==null){h.return=m,O=h;break}O=m}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$n(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,O=g;break e}O=i.return}}var f=e.current;for(O=f;O!==null;){o=O;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,O=v;else e:for(o=f;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Li(9,a)}}catch(S){ne(a,a.return,S)}if(a===o){O=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,O=w;break e}O=a.return}}if(V=s,Xt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Ti,e)}catch{}n=!0}return n}finally{W=r,Ge.transition=t}}return!1}function Yu(e,t,r){t=an(r,t),t=fh(e,t,1),e=Wt(e,t,1),t=Ee(),e!==null&&(cs(e,1,t),Ae(e,t))}function ne(e,t,r){if(e.tag===3)Yu(e,e,r);else for(;t!==null;){if(t.tag===3){Yu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ht===null||!Ht.has(n))){e=an(r,e),e=ph(t,e,1),t=Wt(t,e,1),e=Ee(),t!==null&&(cs(t,1,e),Ae(t,e));break}}t=t.return}}function Tm(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ee(),e.pingedLanes|=e.suspendedLanes&r,he===e&&(ge&r)===r&&(ce===4||ce===3&&(ge&130023424)===ge&&500>se()-jl?hr(e,0):El|=r),Ae(e,t)}function Ih(e,t){t===0&&(e.mode&1?(t=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):t=1);var r=Ee();e=Et(e,t),e!==null&&(cs(e,t,r),Ae(e,r))}function Cm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ih(e,r)}function Om(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(t),Ih(e,r)}var $h;$h=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Re.current)Oe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Oe=!1,vm(e,t,r);Oe=!!(e.flags&131072)}else Oe=!1,Y&&t.flags&1048576&&Md(t,hi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Qs(e,t),e=t.pendingProps;var s=rn(t,be.current);Xr(t,r),s=wl(null,t,n,e,s,r);var i=xl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pe(n)?(i=!0,ci(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pl(t),s.updater=$i,t.stateNode=s,s._reactInternals=t,pa(t,n,e,r),t=va(null,t,n,!0,i,r)):(t.tag=0,Y&&i&&al(t),Se(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Qs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Pm(n),e=tt(n,e),s){case 0:t=ga(null,t,n,e,r);break e;case 1:t=zu(null,t,n,e,r);break e;case 11:t=Mu(null,t,n,e,r);break e;case 14:t=Fu(null,t,n,tt(n.type,e),r);break e}throw Error(j(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),ga(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),zu(e,t,n,s,r);case 3:e:{if(yh(t),e===null)throw Error(j(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Hd(e,t),mi(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=an(Error(j(423)),t),t=Bu(e,t,n,r,s);break e}else if(n!==s){s=an(Error(j(424)),t),t=Bu(e,t,n,r,s);break e}else for(Me=Vt(t.stateNode.containerInfo.firstChild),Fe=t,Y=!0,it=null,r=Vd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nn(),n===s){t=jt(e,t,r);break e}Se(e,t,n,r)}t=t.child}return t;case 5:return qd(t),e===null&&da(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,oa(n,s)?o=null:i!==null&&oa(n,i)&&(t.flags|=32),vh(e,t),Se(e,t,o,r),t.child;case 6:return e===null&&da(t),null;case 13:return wh(e,t,r);case 4:return ml(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sn(t,null,n,r):Se(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Mu(e,t,n,s,r);case 7:return Se(e,t,t.pendingProps,r),t.child;case 8:return Se(e,t,t.pendingProps.children,r),t.child;case 12:return Se(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,q(fi,n._currentValue),n._currentValue=o,i!==null)if(lt(i.value,o)){if(i.children===s.children&&!Re.current){t=jt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=bt(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ha(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ha(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Se(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Xr(t,r),s=Je(s),n=n(s),t.flags|=1,Se(e,t,n,r),t.child;case 14:return n=t.type,s=tt(n,t.pendingProps),s=tt(n.type,s),Fu(e,t,n,s,r);case 15:return mh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Qs(e,t),t.tag=1,Pe(n)?(e=!0,ci(t)):e=!1,Xr(t,r),hh(t,n,s),pa(t,n,s,r),va(null,t,n,!0,e,r);case 19:return xh(e,t,r);case 22:return gh(e,t,r)}throw Error(j(156,t.tag))};function Lh(e,t){return ud(e,t)}function Rm(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(e,t,r,n){return new Rm(e,t,r,n)}function Ol(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pm(e){if(typeof e=="function")return Ol(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ja)return 11;if(e===Qa)return 14}return 2}function Kt(e,t){var r=e.alternate;return r===null?(r=Ke(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Zs(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Ol(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Lr:return fr(r.children,s,i,t);case Ga:o=8,s|=8;break;case Do:return e=Ke(12,r,t,s|2),e.elementType=Do,e.lanes=i,e;case Mo:return e=Ke(13,r,t,s),e.elementType=Mo,e.lanes=i,e;case Fo:return e=Ke(19,r,t,s),e.elementType=Fo,e.lanes=i,e;case qc:return Di(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wc:o=10;break e;case Hc:o=9;break e;case Ja:o=11;break e;case Qa:o=14;break e;case Pt:o=16,n=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=Ke(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function fr(e,t,r,n){return e=Ke(7,e,n,t),e.lanes=r,e}function Di(e,t,r,n){return e=Ke(22,e,n,t),e.elementType=qc,e.lanes=r,e.stateNode={isHidden:!1},e}function So(e,t,r){return e=Ke(6,e,null,t),e.lanes=r,e}function Eo(e,t,r){return t=Ke(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Am(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rl(e,t,r,n,s,i,o,a,l){return e=new Am(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ke(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pl(i),e}function Im(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Uh(e){if(!e)return Jt;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var r=e.type;if(Pe(r))return Ud(e,r,t)}return t}function Dh(e,t,r,n,s,i,o,a,l){return e=Rl(r,n,!0,e,s,i,o,a,l),e.context=Uh(null),r=e.current,n=Ee(),s=qt(r),i=bt(n,s),i.callback=t??null,Wt(r,i,s),e.current.lanes=s,cs(e,s,n),Ae(e,n),e}function Mi(e,t,r,n){var s=t.current,i=Ee(),o=qt(s);return r=Uh(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Wt(s,t,o),e!==null&&(at(e,s,o,i),Ks(e,s,o)),o}function ki(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Pl(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function $m(){return null}var Mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Al(e){this._internalRoot=e}Fi.prototype.render=Al.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Mi(e,t,null,null)};Fi.prototype.unmount=Al.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){Mi(null,e,null,null)}),t[St]=null}};function Fi(e){this._internalRoot=e}Fi.prototype.unstable_scheduleHydration=function(e){if(e){var t=gd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$t.length&&t!==0&&t<$t[r].priority;r++);$t.splice(r,0,e),r===0&&yd(e)}};function Il(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zu(){}function Lm(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=ki(o);i.call(c)}}var o=Dh(t,n,e,0,null,!1,!1,"",Zu);return e._reactRootContainer=o,e[St]=o.current,Gn(e.nodeType===8?e.parentNode:e),yr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=ki(l);a.call(c)}}var l=Rl(e,0,!1,null,null,!1,!1,"",Zu);return e._reactRootContainer=l,e[St]=l.current,Gn(e.nodeType===8?e.parentNode:e),yr(function(){Mi(t,l,r,n)}),l}function Bi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ki(o);a.call(l)}}Mi(t,o,e,s)}else o=Lm(r,t,e,s,n);return ki(o)}pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=jn(t.pendingLanes);r!==0&&(Za(t,r|1),Ae(t,se()),!(V&6)&&(ln=se()+500,Xt()))}break;case 13:yr(function(){var n=Et(e,1);if(n!==null){var s=Ee();at(n,e,1,s)}}),Pl(e,1)}};el=function(e){if(e.tag===13){var t=Et(e,134217728);if(t!==null){var r=Ee();at(t,e,134217728,r)}Pl(e,134217728)}};md=function(e){if(e.tag===13){var t=qt(e),r=Et(e,t);if(r!==null){var n=Ee();at(r,e,t,n)}Pl(e,t)}};gd=function(){return W};vd=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};Qo=function(e,t,r){switch(t){case"input":if(Vo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Pi(n);if(!s)throw Error(j(90));Gc(n),Vo(n,s)}}}break;case"textarea":Qc(e,r);break;case"select":t=r.value,t!=null&&Gr(e,!!r.multiple,t,!1)}};nd=Nl;sd=yr;var Um={usingClientEntryPoint:!1,Events:[hs,Fr,Pi,td,rd,Nl]},_n={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dm={bundleType:_n.bundleType,version:_n.version,rendererPackageName:_n.rendererPackageName,rendererConfig:_n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ad(e),e===null?null:e.stateNode},findFiberByHostInstance:_n.findFiberByHostInstance||$m,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ls=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ls.isDisabled&&Ls.supportsFiber)try{Ti=Ls.inject(Dm),ft=Ls}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Um;Be.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Il(t))throw Error(j(200));return Im(e,t,null,r)};Be.createRoot=function(e,t){if(!Il(e))throw Error(j(299));var r=!1,n="",s=Mh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Rl(e,1,!1,null,null,r,!1,n,s),e[St]=t.current,Gn(e.nodeType===8?e.parentNode:e),new Al(t)};Be.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=ad(t),e=e===null?null:e.stateNode,e};Be.flushSync=function(e){return yr(e)};Be.hydrate=function(e,t,r){if(!zi(t))throw Error(j(200));return Bi(null,e,t,!0,r)};Be.hydrateRoot=function(e,t,r){if(!Il(e))throw Error(j(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Mh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Dh(t,null,e,1,r??null,s,!1,i,o),e[St]=t.current,Gn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Fi(t)};Be.render=function(e,t,r){if(!zi(t))throw Error(j(200));return Bi(null,e,t,!1,r)};Be.unmountComponentAtNode=function(e){if(!zi(e))throw Error(j(40));return e._reactRootContainer?(yr(function(){Bi(null,null,e,!1,function(){e._reactRootContainer=null,e[St]=null})}),!0):!1};Be.unstable_batchedUpdates=Nl;Be.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zi(r))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Bi(e,t,r,!1,n)};Be.version="18.3.1-next-f1338f8080-20240426";function Fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fh)}catch(e){console.error(e)}}Fh(),Fc.exports=Be;var zh=Fc.exports,Bh,ec=zh;Bh=ec.createRoot,ec.hydrateRoot;function Vi(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Mm(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(p){o(p)}}function l(d){try{c(n.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}const Fm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class $l extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class zm extends $l{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class tc extends $l{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class rc extends $l{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ca;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ca||(Ca={}));class Bm{constructor(t,{headers:r={},customFetch:n,region:s=Ca.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Fm(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Mm(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:d,timeout:p}=n;let h={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let _;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",_=c):typeof c=="string"?(h["Content-Type"]="text/plain",_=c):typeof FormData<"u"&&c instanceof FormData?_=c:(h["Content-Type"]="application/json",_=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?_=JSON.stringify(c):_=c;let k=d;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),d?(k=o.signal,d.addEventListener("abort",()=>o.abort())):k=o.signal);const g=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:_,signal:k}).catch(S=>{throw new zm(S)}),f=g.headers.get("x-relay-error");if(f&&f==="true")throw new tc(g);if(!g.ok)throw new rc(g);let v=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield g.json():v==="application/octet-stream"||v==="application/pdf"?w=yield g.blob():v==="text/event-stream"?w=g:v==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof rc||a instanceof tc?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Vm=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Wm=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,d=i.statusText;if(i.ok){var p,h;if(r.method!=="HEAD"){var m;const g=await i.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const _=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),k=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");_&&k&&k.length>1&&(l=parseInt(k[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var y;const _=await i.text();try{o=JSON.parse(_),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,d="OK")}catch{i.status===404&&_===""?(c=204,d="No Content"):o={message:_}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&r.shouldThrowOnError)throw new Vm(o)}return{error:o,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var c,d,p,h;const y=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",_=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${y}`,_&&(a+=` (${_})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var m;a=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Hm=class extends Wm{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const nc=new RegExp("[,()]");var Rr=class extends Hm{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&nc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&nc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},qm=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),n&&l.append("Prefer",`count=${n}`),new Rr({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new Rr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(c.length>0){const d=[...new Set(c)].map(p=>`"${p}"`);a.searchParams.set("columns",d.join(","))}}return new Rr({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Rr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Rr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Km=class Vh{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new qm(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Vh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let c;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),p=n&&Object.values(r).some(d);p?(a="POST",c=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{l.searchParams.append(m,y)})):(a="POST",c=r);const h=new Headers(this.headers);return p?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Rr({method:a,url:l,headers:h,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Gm{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Jm="2.90.1",Qm=`realtime-js/${Jm}`,Wh="1.0.0",Ym="2.0.0",sc=Wh,Oa=1e4,Xm=1e3,Zm=100;var It;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(It||(It={}));var le;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(le||(le={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var Ra;(function(e){e.websocket="websocket"})(Ra||(Ra={}));var or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(or||(or={}));class eg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+p.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(m),_=0;y.setUint8(_++,this.KINDS.userBroadcastPush),y.setUint8(_++,l.length),y.setUint8(_++,a.length),y.setUint8(_++,o.length),y.setUint8(_++,c.length),y.setUint8(_++,p.length),y.setUint8(_++,r),Array.from(l,g=>y.setUint8(_++,g.charCodeAt(0))),Array.from(a,g=>y.setUint8(_++,g.charCodeAt(0))),Array.from(o,g=>y.setUint8(_++,g.charCodeAt(0))),Array.from(c,g=>y.setUint8(_++,g.charCodeAt(0))),Array.from(p,g=>y.setUint8(_++,g.charCodeAt(0)));var k=new Uint8Array(m.byteLength+n.byteLength);return k.set(new Uint8Array(m),0),k.set(new Uint8Array(n),m.byteLength),k.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const p=n.decode(t.slice(l,l+o));l=l+o;const h=t.slice(l,t.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(y.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Hh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const ic=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=tg(o,e,t,s),i),{}):{}},tg=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?qh(i,o):Pa(o)},qh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ig(t,r)}switch(e){case H.bool:return rg(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return ng(t);case H.json:case H.jsonb:return sg(t);case H.timestamp:return og(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return Pa(t);default:return Pa(t)}},Pa=e=>e,rg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ng=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},ig=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>qh(t,a))}return e},og=e=>typeof e=="string"?e.replace(" ","T"):e,Kh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class jo{constructor(t,r,n={},s=Oa){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var oc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(oc||(oc={}));class Dn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Dn.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Dn.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const p=i[c];if(p){const h=d.map(k=>k.presence_ref),m=p.map(k=>k.presence_ref),y=d.filter(k=>m.indexOf(k.presence_ref)<0),_=p.filter(k=>h.indexOf(k.presence_ref)<0);y.length>0&&(a[c]=y),_.length>0&&(l[c]=_)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const p=t[a].map(m=>m.presence_ref),h=d.filter(m=>p.indexOf(m.presence_ref)<0);t[a].unshift(...h)}n(a,d,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ac;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ac||(ac={}));var Mn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Mn||(Mn={}));var yt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Kr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jo(this,st.join,this.params,this.timeout),this.rejoinTimer=new Hh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Dn(this),this.broadcastEndpointURL=Kh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Mn.PRESENCE]&&this.bindings[Mn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(yt.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(yt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(y=_==null?void 0:_.length)!==null&&y!==void 0?y:0,g=[];for(let f=0;f<k;f++){const v=_[f],{filter:{event:w,schema:S,table:b,filter:E}}=v,N=m&&m[f];if(N&&N.event===w&&Kr.isFilterValueEqual(N.schema,S)&&Kr.isFilterValueEqual(N.table,b)&&Kr.isFilterValueEqual(N.filter,E))g.push(Object.assign(Object.assign({},v),{id:N.id}));else{this.unsubscribe(),this.state=le.errored,t==null||t(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(yt.SUBSCRIBED);return}}).receive("error",m=>{this.state=le.errored,t==null||t(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===le.joined&&t===Mn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new jo(this,st.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new jo(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Zm){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=st;if(n&&[a,l,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,_,k;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((k=(_=m.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,_,k,g,f,v,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const b=m.id,E=(y=m.filter)===null||y===void 0?void 0:y.event;return b&&((_=r.ids)===null||_===void 0?void 0:_.includes(b))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))&&(!(!((g=m.filter)===null||g===void 0)&&g.table)||m.filter.table===((f=r.data)===null||f===void 0?void 0:f.table))}else{const b=(w=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return b==="*"||b===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:_,table:k,commit_timestamp:g,type:f,errors:v}=y;h=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:g,eventType:f,new:{},old:{},errors:v}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Kr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ic(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ic(t.columns,t.old_record)),r}}const No=()=>{},Us={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ag=[1e3,2e3,5e3,1e4],lg=1e4,ug=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cg{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Oa,this.transport=null,this.heartbeatIntervalMs=Us.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=No,this.ref=0,this.reconnectTimer=null,this.vsn=sc,this.logger=No,this.conn=null,this.sendBuffer=[],this.serializer=new eg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ra.websocket}`,this.httpEndpoint=Kh(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gm.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case It.connecting:return or.Connecting;case It.open:return or.Open;case It.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Kr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Xm,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Us.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===It.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===It.open||this.conn.readyState===It.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ug],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:Qm};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(st.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Hh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Us.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c,d,p,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Oa,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Us.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:No,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:sc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:y=>ag[y-1]||lg,this.vsn){case Wh:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,_)=>_(JSON.stringify(y)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(y,_)=>_(JSON.parse(y));break;case Ym:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ns=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function dg(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function hg(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function fg(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=dg(e.baseUrl,n,s),l=await hg(e.auth),c=await t(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),h=p&&d?JSON.parse(d):d;if(!c.ok){const m=p?h:void 0,y=m==null?void 0:m.error;throw new ns((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:c.status,headers:c.headers,data:h}}}}function Ds(e){return e.join("")}var pg=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ds(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ds(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ds(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ds(e.namespace)}`}),!0}catch(t){if(t instanceof ns&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof ns&&r.status===409)return;throw r}}};function Sr(e){return e.join("")}var mg=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ns&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof ns&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},gg=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=fg({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new pg(this.client,t),this.tableOps=new mg(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Wi=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function X(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var vg=class extends Wi{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Aa=class extends Wi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Ll=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yg=()=>Response,Ia=e=>{if(Array.isArray(e))return e.map(r=>Ia(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ia(n)}),t},wg=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xg=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ss(e){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(e)}function _g(e,t){if(ss(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ss(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bg(e){var t=_g(e,"string");return ss(t)=="symbol"?t:t+""}function kg(e,t,r){return(t=bg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lc(Object(r),!0).forEach(function(n){kg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const To=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Sg=async(e,t,r)=>{e instanceof await yg()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new vg(To(n),s,i))}).catch(n=>{t(new Aa(To(n),n))}):t(new Aa(To(e),e))},Eg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(wg(n)?(s.headers=U({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),U(U({},s),r))};async function ps(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,Eg(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Sg(l,a,n))})}async function is(e,t,r,n){return ps(e,"GET",t,r,n)}async function rt(e,t,r,n,s){return ps(e,"POST",t,n,s,r)}async function $a(e,t,r,n,s){return ps(e,"PUT",t,n,s,r)}async function jg(e,t,r,n){return ps(e,"HEAD",t,U(U({},r),{},{noResolveJson:!0}),n)}async function Ul(e,t,r,n,s){return ps(e,"DELETE",t,n,s,r)}var Ng=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};let Gh;Gh=Symbol.toStringTag;var Tg=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Gh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ng(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}}};const Cg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Og=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ll(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=U(U({},uc),n);let a=U(U({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=U(U({},a),n.headers));const c=s._removeEmptyFolders(t),d=s._getFinalPath(c),p=await(e=="PUT"?$a:rt)(s.fetch,`${s.url}/object/${d}`,i,U({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=U({upsert:uc.upsert},n),d=U(U({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:i,fullPath:(await $a(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(X(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=U({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await rt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new Wi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await rt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await rt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await rt(n.fetch,`${n.url}/object/sign/${s}`,U({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await rt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>U(U({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>is(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Tg(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Ia(await is(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await jg(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(X(n)&&n instanceof Aa){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(e){var t=this;try{return{data:await Ul(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=U(U(U({},Cg),t),{},{prefix:e||""});return{data:await rt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=U({},e);return{data:await rt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Jh="2.90.1",Qh={"X-Client-Info":`storage-js/${Jh}`};var Rg=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=U(U({},Qh),t),this.fetch=Ll(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await is(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await is(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await rt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await $a(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Ul(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Pg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Qh),t),this.fetch=Ll(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await is(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Ul(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!xg(e))throw new Wi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new gg({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const Dl={"X-Client-Info":`storage-js/${Jh}`,"Content-Type":"application/json"};var Yh=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Co=class extends Yh{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ag=class extends Yh{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Ml=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ig=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},cc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$g=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Co(cc(i),n,o))}).catch(()=>{const i=n+"";t(new Co(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Co(s.statusText||`HTTP ${n} error`,n,i))}}else t(new Ag(cc(e),e))},Lg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Ig(n)?(s.headers=U({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,U(U({},s),r)):s};async function Ug(e,t,r,n,s,i){return new Promise((o,a)=>{e(r,Lg(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>$g(l,a,n))})}async function De(e,t,r,n,s){return Ug(e,"POST",t,n,s,r)}var Dg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Dl),t),this.fetch=Ml(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await De(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}}},Mg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Dl),t),this.fetch=Ml(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await De(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await De(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}},Fg=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=U(U({},Dl),t),this.fetch=Ml(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await De(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await De(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}}},zg=class extends Fg{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Bg(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Bg=class extends Dg{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Vg(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Vg=class extends Mg{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Wg=class extends Rg{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Og(this.url,this.headers,e,this.fetch)}get vectors(){return new zg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Pg(this.url+"/iceberg",this.headers,this.fetch)}};const Xh="2.90.1",Pr=30*1e3,La=3,Oo=La*Pr,Hg="http://localhost:9999",qg="supabase.auth.token",Kg={"X-Client-Info":`gotrue-js/${Xh}`},Ua="X-Supabase-Api-Version",Zh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jg=10*60*1e3;class os extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function P(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Qg extends os{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Yg(e){return P(e)&&e.name==="AuthApiError"}class ar extends os{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Tt extends os{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class $e extends Tt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xg(e){return P(e)&&e.name==="AuthSessionMissingError"}class Er extends Tt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ms extends Tt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fs extends Tt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zg(e){return P(e)&&e.name==="AuthImplicitGrantRedirectError"}class dc extends Tt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class e0 extends Tt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Da extends Tt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ro(e){return P(e)&&e.name==="AuthRetryableFetchError"}class hc extends Tt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ma extends Tt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fc=` 	
\r=`.split(""),t0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<fc.length;t+=1)e[fc[t].charCodeAt(0)]=-2;for(let t=0;t<Si.length;t+=1)e[Si[t].charCodeAt(0)]=t;return e})();function pc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Si[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Si[n]),t.queuedBits-=6}}function ef(e,t,r){const n=t0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function mc(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{s0(o,n,r)};for(let o=0;o<e.length;o+=1)ef(e.charCodeAt(o),s,i);return t.join("")}function r0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function n0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}r0(n,t)}}function s0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function en(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)ef(e.charCodeAt(s),r,n);return new Uint8Array(t)}function i0(e){const t=[];return n0(e,r=>t.push(r)),new Uint8Array(t)}function dr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>pc(s,r,n)),pc(null,r,n),t.join("")}function o0(e){return Math.round(Date.now()/1e3)+e}function a0(){return Symbol("auth-callback")}const pe=()=>typeof window<"u"&&typeof document<"u",tr={tested:!1,writable:!1},tf=()=>{if(!pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function l0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const rf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),u0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ar=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fe=async(e,t)=>{await e.removeItem(t)};class Hi{constructor(){this.promise=new Hi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hi.promiseConstructor=Promise;function Po(e){const t=e.split(".");if(t.length!==3)throw new Ma("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Gg.test(t[n]))throw new Ma("JWT not in base64url format");return{header:JSON.parse(mc(t[0])),payload:JSON.parse(mc(t[1])),signature:en(t[2]),raw:{header:t[0],payload:t[1]}}}async function c0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function d0(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function h0(e){return("0"+e.toString(16)).substr(-2)}function f0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,h0).join("")}async function p0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function m0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await p0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jr(e,t,r=!1){const n=f0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ar(e,`${t}-code-verifier`,s);const i=await m0(n);return[i,n===i?"plain":"s256"]}const g0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v0(e){const t=e.headers.get(Ua);if(!t||!t.match(g0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function y0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function w0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nr(e){if(!x0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ao(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _0(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function gc(e){return JSON.parse(JSON.stringify(e))}const ir=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b0=[502,503,504];async function vc(e){var t;if(!u0(e))throw new Da(ir(e),0);if(b0.includes(e.status))throw new Da(ir(e),e.status);let r;try{r=await e.json()}catch(i){throw new ar(ir(i),i)}let n;const s=v0(e);if(s&&s.getTime()>=Zh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new hc(ir(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $e}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new hc(ir(r),e.status,r.weak_password.reasons);throw new Qg(ir(r),e.status||500,n)}const k0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function L(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ua]||(i[Ua]=Zh["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await S0(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function S0(e,t,r,n,s,i){const o=k0(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Da(ir(l),0)}if(a.ok||await vc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await vc(l)}}function et(e){var t;let r=null;N0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=o0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function yc(e){const t=et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ut(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function E0(e){return{data:e,error:null}}function j0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Vi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function wc(e){return e}function N0(e){return e.access_token&&e.refresh_token&&e.expires_in}const Io=["global","local","others"];class T0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=rf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Io[0]){if(Io.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Io.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(P(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ut})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Vi(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(P(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ut})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:wc});if(d.error)throw d.error;const p=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);c[`${k}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(P(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Nr(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ut})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Nr(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ut})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Nr(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ut})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Nr(t.userId);try{const{data:r,error:n}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(P(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Nr(t.userId),Nr(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:wc});if(d.error)throw d.error;const p=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);c[`${k}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(P(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(P(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(P(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(P(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(P(r))return{data:null,error:r};throw r}}}function xc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Tr={debug:!!(globalThis&&tf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C0 extends nf{}async function O0(e,t,r){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function R0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function P0(e){return parseInt(e,16)}function A0(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function I0(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:p,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=sf(e.address),y=d?`${d}://${n}`:n,_=e.statement?`${e.statement}
`:"",k=`${y} wants you to sign in with your Ethereum account:
${m}

${_}`;let g=`URI: ${p}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let f=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);f+=`
- ${v}`}g+=f}return`${k}
${g}`}class oe extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ei extends oe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function $0({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(of(o)){if(i.rp.id!==o)return new oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function L0({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(of(n)){if(r.rpId!==n)return new oe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class U0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const D0=new U0;function M0(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Vi(e,["challenge","user","excludeCredentials"]),i=en(t).buffer,o=Object.assign(Object.assign({},r),{id:en(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:en(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function F0(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Vi(e,["challenge","allowCredentials"]),s=en(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:en(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function z0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:dr(new Uint8Array(e.response.attestationObject)),clientDataJSON:dr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function B0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:dr(new Uint8Array(s.authenticatorData)),clientDataJSON:dr(new Uint8Array(s.clientDataJSON)),signature:dr(new Uint8Array(s.signature)),userHandle:s.userHandle?dr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function of(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function _c(){var e,t;return!!(pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function V0(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ei("Browser returned unexpected credential type",t)}:{data:null,error:new Ei("Empty credential response",t)}}catch(t){return{data:null,error:$0({error:t,options:e})}}}async function W0(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ei("Browser returned unexpected credential type",t)}:{data:null,error:new Ei("Empty credential response",t)}}catch(t){return{data:null,error:L0({error:t,options:e})}}}const H0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},q0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ji(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=ji(a,o):n[i]=ji(o)}else n[i]=o}return n}function K0(e,t){return ji(H0,e,t||{})}function G0(e,t){return ji(q0,e,t||{})}class J0{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??D0.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=K0(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:p}=await V0({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=G0(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:p}=await W0(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return P(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new os("rpId is required for WebAuthn authentication")};try{if(!_c())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return P(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new os("rpId is required for WebAuthn registration")};try{if(!_c())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return P(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in register",o)}}}}R0();const Q0={url:Hg,storageKey:qg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function bc(e,t,r){return await r()}const Cr={};class as{get jwks(){var t,r;return(r=(t=Cr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cr[this.storageKey]=Object.assign(Object.assign({},Cr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cr[this.storageKey]=Object.assign(Object.assign({},Cr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Q0),t);if(this.storageKey=i.storageKey,this.instanceID=(r=as.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,as.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&pe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new T0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rf(i.fetch),this.lock=i.lock||bc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&pe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=O0:this.lock=bc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new J0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:tf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=xc(this.memoryStorage)),pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Xh}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(pe()&&(r=l0(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),pe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Zg(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return P(r)?this._returnResult({error:r}):this._returnResult({error:new ar("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:et}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(P(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:p,options:h}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await jr(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:et})}else if("phone"in t){const{phone:d,password:p,options:h}=t;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:et})}else throw new Ms("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yc})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yc})}else throw new Ms("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Er;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,c,d,p,h;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:_,wallet:k,statement:g,options:f}=t;let v;if(pe())if(typeof k=="object")v=k;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=k}const w=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=sf(S[0]);let E=(n=f==null?void 0:f.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const A=await v.request({method:"eth_chainId"});E=P0(A)}const N={domain:w.host,address:b,statement:g,uri:w.href,version:"1",chainId:E,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=f==null?void 0:f.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=I0(N),y=await v.request({method:"personal_sign",params:[A0(m),b]})}try{const{data:_,error:k}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:et});if(k)throw k;if(!_||!_.session||!_.user){const g=new Er;return this._returnResult({data:{user:null,session:null},error:g})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:k})}catch(_){if(P(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,n,s,i,o,a,l,c,d,p,h,m;let y,_;if("message"in t)y=t.message,_=t.signature;else{const{chain:k,wallet:g,statement:f,options:v}=t;let w;if(pe())if(typeof g=="object")w=g;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))w=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const b=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),f?{statement:f}:null));let E;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")E=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)E=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),_=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((p=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...v.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const b=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=b}}try{const{data:k,error:g}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:dr(_)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:et});if(g)throw g;if(!k||!k.session||!k.user){const f=new Er;return this._returnResult({data:{user:null,session:null},error:f})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:g})}catch(k){if(P(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new e0;const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:et});if(await fe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Er;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:et}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Er;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await jr(this.storage,this.storageKey));const{error:p}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Ms("You must provide either an email or phone number.")}catch(a){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await jr(this.storage,this.storageKey));const c=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:E0});return!((i=c.data)===null||i===void 0)&&i.url&&pe()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $e;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(P(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await L(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await L(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ms("You must provide either an email or phone number and a type")}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Oo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ao()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=_0(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ut}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $e}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ut})})}catch(r){if(P(r))return Xg(r)&&(await this._removeSession(),await fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $e;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await jr(this.storage,this.storageKey));const{data:c,error:d}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ut});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $e;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Po(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(P(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $e;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!pe())throw new Fs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new dc("No code detected.");const{data:f,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Fs("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let h=d+p;l&&(h=parseInt(l));const m=h-d;m*1e3<=Pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);const y=h-p;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:_,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:h,refresh_token:o,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(P(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Yg(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=a0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await jr(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:p,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return pe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(P(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:d}=t,p=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:et}),{data:h,error:m}=p;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Er}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(s){if(await fe(this.storage,`${this.storageKey}-code-verifier`),P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await d0(async s=>(s>0&&await c0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ro(i)&&Date.now()+o-n<Pr})}catch(n){if(this._debug(r,"error",n),P(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),pe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await rr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ar(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ao()}else if(s&&!s.user&&!s.user){const o=await rr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await fe(this.storage,this.storageKey+"-user"),await Ar(this.storage,this.storageKey,s)):s.user=Ao()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Oo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Oo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ro(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new $e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),P(i)){const o={data:null,error:i};return Ro(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ar(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=gc(s);await Ar(this.storage,this.storageKey,i)}else{const s=gc(r);await Ar(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fe(this.storage,this.storageKey),await fe(this.storage,this.storageKey+"-code-verifier"),await fe(this.storage,this.storageKey+"-user"),this.userStorage&&await fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Pr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pr}ms, refresh threshold is ${La} ticks`),s<=La&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await jr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await L(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?z0(t.webauthn.credential_response):B0(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:M0(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:F0(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Po(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new $e})})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new $e});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new $e});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new $e})})}catch(t){if(P(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $e})})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+Jg>s)return n;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Po(n);r!=null&&r.allowExpired||y0(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=w0(s.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,i0(`${a}.${l}`)))throw new Ma("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(P(n))return this._returnResult({data:null,error:n});throw n}}}as.nextInstanceID={};const Y0=as,X0="2.90.1";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";const Z0={"X-Client-Info":`supabase-js-${Tn}/${X0}`},ev={headers:Z0},tv={schema:"public"},rv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nv={};function ls(e){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(e)}function sv(e,t){if(ls(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iv(e){var t=sv(e,"string");return ls(t)=="symbol"?t:t+""}function ov(e,t,r){return(t=iv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kc(Object(r),!0).forEach(function(n){ov(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const av=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lv=()=>Headers,uv=(e,t,r)=>{const n=av(r),s=lv();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,re(re({},o),{},{headers:c}))}};function cv(e){return e.endsWith("/")?e:e+"/"}function dv(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:d,global:p}=t,h={db:re(re({},l),s),auth:re(re({},c),i),realtime:re(re({},d),o),storage:{},global:re(re(re({},p),a),{},{headers:re(re({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function hv(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var fv=class extends Y0{constructor(e){super(e)}},pv=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=hv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:tv,realtime:nv,auth:re(re({},rv),{},{storageKey:o}),global:ev},l=dv(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=uv(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(re({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Km(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Wg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Bm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},d,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fv({url:this.authUrl.href,headers:re(re({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cg(this.realtimeUrl.href,re(re({},e),{},{params:re(re({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const mv=(e,t,r)=>new pv(e,t,r);function gv(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}gv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vv="https://pzjafnajvomtcmzuswbs.supabase.co",yv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB6amFmbmFqdm9tdGNtenVzd2JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4MzgyODQsImV4cCI6MjA3NzQxNDI4NH0.73S89fz_dH9X1OLXGgFqBIrWHubRyi6W_N7M17zK3qw",We=mv(vv,yv),af=R.createContext(void 0);function wv({children:e}){const[t,r]=R.useState(null),[n,s]=R.useState(null),[i,o]=R.useState(!0);R.useEffect(()=>{console.log("[AuthContext] Initializing auth state..."),We.auth.getSession().then(({data:{session:h}})=>{console.log("[AuthContext] Initial session loaded:",h?"User logged in":"No user"),s(h),r((h==null?void 0:h.user)??null),o(!1)});const{data:{subscription:p}}=We.auth.onAuthStateChange((h,m)=>{(async()=>(console.log("[AuthContext] Auth state changed:",h,m?"User present":"No user"),s(m),r((m==null?void 0:m.user)??null)))()});return()=>p.unsubscribe()},[]);const d={user:t,session:n,loading:i,signUp:async(p,h)=>{try{console.log("[AuthContext] Attempting sign up for:",p);const{data:m,error:y}=await We.auth.signUp({email:p,password:h});return y?console.error("[AuthContext] Sign up error:",y):console.log("[AuthContext] Sign up successful:",m),{error:y}}catch(m){return console.error("[AuthContext] Sign up exception:",m),{error:m}}},signIn:async(p,h)=>{try{console.log("[AuthContext] Attempting sign in for:",p);const{data:m,error:y}=await We.auth.signInWithPassword({email:p,password:h});return y?console.error("[AuthContext] Sign in error:",y):console.log("[AuthContext] Sign in successful:",m),{error:y}}catch(m){return console.error("[AuthContext] Sign in exception:",m),{error:m}}},signOut:async()=>{await We.auth.signOut()}};return u.jsx(af.Provider,{value:d,children:e})}function Fl(){const e=R.useContext(af);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function lf(e){const t={"Double-Down":"bg-emerald-100 text-emerald-800 border-emerald-200",Iterate:"bg-amber-100 text-amber-800 border-amber-200",Kill:"bg-rose-100 text-rose-800 border-rose-200","":"bg-slate-100 text-slate-700 border-slate-200"};return t[e||""]||t[""]}function xv(e){return{high:"text-emerald-600",medium:"text-amber-600",low:"text-rose-600"}[e]}function _v(e){return{high:"",medium:"",low:""}[e]}const uf=(e=new Date)=>{const t=new Date(e),n=(t.getDay()+6)%7;return t.setHours(0,0,0,0),t.setDate(t.getDate()-n),t},Ir=e=>e.toISOString().slice(0,10),Rt=e=>e?new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"}):"",bv=e=>{if(!(e==null||Number.isNaN(e)))return Math.max(0,Math.min(1e3,e))},kv=e=>{const t=bv(e.result);return t===void 0?"":t>=e.target?"Double-Down":t<=e.target*.5?"Kill":"Iterate"},zs=e=>e.verdict_manual??kv(e),$o=lf,Sc=e=>({Inbox:"bg-slate-100 text-slate-700 border-slate-200",Running:"bg-blue-100 text-blue-800 border-blue-200",Review:"bg-orange-100 text-orange-800 border-orange-200",Decided:"bg-green-100 text-green-800 border-green-200"})[e]||"bg-slate-100 text-slate-700 border-slate-200",Ec=e=>{const t=(e??"").trim().replace(/\s+/g," "),r=120;return t?t.length<=r?{next:t,overflow:""}:{next:t.slice(0,r).trim()+"",overflow:t.slice(r).trim()}:{next:"",overflow:""}},Sv=(e=new Date)=>{const t=new Date(e);t.setHours(0,0,0,0);const r=(t.getDay()+6)%7;return t.setDate(t.getDate()-r),t},bn=(e,t)=>{const r=new Date(e);r.setHours(0,0,0,0);const n=new Date(t);return n.setDate(n.getDate()+6),r>=t&&r<=n},kn=e=>({Twitter:"bg-sky-50 text-sky-700 border-sky-200",Email:"bg-emerald-50 text-emerald-700 border-emerald-200","Slack group":"bg-violet-50 text-violet-700 border-violet-200","Direct outreach":"bg-amber-50 text-amber-700 border-amber-200",Referral:"bg-indigo-50 text-indigo-700 border-indigo-200",Organic:"bg-teal-50 text-teal-700 border-teal-200",Paid:"bg-rose-50 text-rose-700 border-rose-200",Other:"bg-slate-100 text-slate-700 border-slate-200"})[e??"Other"],Or=30;function Ev(e){const t=1/(1+.2316419*Math.abs(e));let n=1-.3989423*Math.exp(-e*e/2)*t*(1.330274429+t*(-1.821255978+t*(1.781477937+t*(-.356563782+t*.31938153))));return e>=0?n:1-n}function jv(e,t,r){const n=Math.sqrt(t*(1-t)/r);if(n===0)return{z:0,p:1};const s=(e-t)/n,i=1-Ev(s);return{z:s,p:i}}function jc(e,t){const n=1.96*Math.sqrt(e*(1-e)/t);return[Math.max(0,e-n),Math.min(1,e+n)]}function Nv(e){const t=[],r=e.exposure_n??0;if(e.result===void 0||e.result===null)return t.push("No Result % yet."),{verdict:"",reasons:t};const n=(e.result??0)/100;r<Or&&t.push(`Insufficient exposure (n=${r} < ${Or}).`);const s=e.decision_rule;if((s==null?void 0:s.mode)==="absolute"){const a=jc(n,Math.max(r,1)),l=(e.target??0)/100;return t.push(`95% CI: ${(a[0]*100).toFixed(1)}%  ${(a[1]*100).toFixed(1)}% vs target ${e.target??0}%.`),r>=Or&&a[0]>=l?{verdict:"Double-Down",reasons:t,ci95:a}:n<=l*.5?{verdict:"Kill",reasons:t,ci95:a}:{verdict:"Iterate",reasons:t,ci95:a}}if((s==null?void 0:s.mode)==="uplift"||(s==null?void 0:s.mode)==="uplift+sig"){const a=(e.baseline_pct??0)/100;if(a<=0)return t.push("Missing Baseline % for uplift rule."),{verdict:"",reasons:t};const l=(n-a)/a*100;if(t.push(`Uplift: ${l.toFixed(1)}% (result ${e.result}% vs base ${e.baseline_pct}%).`),s.mode==="uplift+sig"){const{p:c}=jv(n,a,Math.max(r,1));return t.push(`p-value  ${c.toFixed(3)} (one-tailed vs baseline)`),l>=s.thresholdPct&&c<s.sig&&r>=Or?{verdict:"Double-Down",reasons:t,upliftPct:l,pValue:c}:l<=0?{verdict:"Kill",reasons:t,upliftPct:l,pValue:c}:{verdict:"Iterate",reasons:t,upliftPct:l,pValue:c}}else return l>=s.thresholdPct&&r>=Or?{verdict:"Double-Down",reasons:t,upliftPct:l}:l<=0?{verdict:"Kill",reasons:t,upliftPct:l}:{verdict:"Iterate",reasons:t,upliftPct:l}}const i=(e.target??0)/100,o=jc(n,Math.max(r,1));return t.push(`95% CI: ${(o[0]*100).toFixed(1)}%  ${(o[1]*100).toFixed(1)}% vs target ${e.target??0}%.`),r>=Or&&n>=i?{verdict:"Double-Down",reasons:t,ci95:o}:n<=i*.5?{verdict:"Kill",reasons:t,ci95:o}:{verdict:"Iterate",reasons:t,ci95:o}}function Tv(){const[e,t]=R.useState([]),[r,n]=R.useState(!0),[s,i]=R.useState(null);R.useEffect(()=>{o();const d=We.channel("variants-changes").on("postgres_changes",{event:"*",schema:"public",table:"variants"},()=>{o()}).subscribe();return()=>{We.removeChannel(d)}},[]);async function o(){try{const{data:d,error:p}=await We.from("variants").select("*").order("created_at",{ascending:!1});if(p)throw p;t(d||[]),i(null)}catch(d){i(d instanceof Error?d.message:"Failed to fetch variants")}finally{n(!1)}}async function a(d){try{console.log(" addVariant called with:",d);const{data:{user:p},error:h}=await We.auth.getUser();if(console.log(" Current user:",p==null?void 0:p.id,"Error:",h),h)throw console.error(" Error getting user:",h),new Error("Authentication error: "+h.message);if(!p)throw new Error("You must be logged in to create variants");const m={mvp:d.mvp,name:d.name,status:d.status,metric:d.metric,target:d.target,week:d.week,user_id:p.id};d.result!==void 0&&d.result!==null&&(m.result=d.result),d.next_action&&d.next_action.trim()&&(m.next_action=d.next_action.trim()),d.owner&&d.owner.trim()&&(m.owner=d.owner.trim()),d.due&&(m.due=d.due.trim()||null),d.verdict&&(m.verdict=d.verdict),d.verdict_manual&&(m.verdict_manual=d.verdict_manual),d.iteration!==void 0&&(m.iteration=d.iteration),d.action_type&&d.action_type.trim()&&(m.action_type=d.action_type.trim()),d.notes&&d.notes.trim()&&(m.notes=d.notes.trim()),d.channel&&(m.channel=d.channel),d.channel_detail&&d.channel_detail.trim()&&(m.channel_detail=d.channel_detail.trim()),d.exposure_n!==void 0&&d.exposure_n!==null&&(m.exposure_n=d.exposure_n),d.baseline_pct!==void 0&&d.baseline_pct!==null&&(m.baseline_pct=d.baseline_pct),d.decision_rule&&(m.decision_rule=d.decision_rule);const{next:y,overflow:_}=Ec(m.next_action);m.next_action=y||null,_&&(m.notes=[m.notes,_].filter(Boolean).join(`

`)),console.log(" Inserting data:",m);const{data:k,error:g}=await We.from("variants").insert(m).select().single();if(g){console.error(" Supabase insert error:",g);const f=`Database error: ${g.message||"Unknown error"}${g.details?` - ${g.details}`:""}${g.hint?` (${g.hint})`:""}`;throw new Error(f)}if(!k)throw new Error("No data returned from insert");return console.log(" Variant created successfully:",k),await o(),i(null),k}catch(p){const h=p instanceof Error?p.message:"Failed to add variant";return i(h),console.error(" addVariant error:",p),null}}async function l(d,p){try{console.log(" updateVariant called with id:",d,"updates:",p);const h={...p};if("next_action"in p){const{next:_,overflow:k}=Ec(p.next_action);if(h.next_action=_||null,k){const g=e.find(v=>v.id===d),f=(g==null?void 0:g.notes)||"";h.notes=[f,k].filter(Boolean).join(`

`)}}"due"in p&&p.due===""&&(h.due=null),"owner"in p&&p.owner===""&&(h.owner=null),"channel_detail"in p&&p.channel_detail===""&&(h.channel_detail=null),console.log(" Sending to database:",h);const{data:m,error:y}=await We.from("variants").update(h).eq("id",d).select();if(y){console.error(" Supabase update error:",y),console.error(" Error details - code:",y.code,"message:",y.message,"details:",y.details,"hint:",y.hint);const _=`Database error: ${y.message||"Unknown error"}${y.details?` - ${y.details}`:""}${y.hint?` (${y.hint})`:""}`;throw new Error(_)}return console.log(" Update successful:",m),await o(),i(null),m}catch(h){const m=h instanceof Error?h.message:"Failed to update variant";throw i(m),console.error("updateVariant error:",h),h}}async function c(d){try{const{error:p}=await We.from("variants").delete().eq("id",d);if(p)throw p;await o()}catch(p){i(p instanceof Error?p.message:"Failed to delete variant")}}return{variants:e,loading:r,error:s,addVariant:a,updateVariant:l,deleteVariant:c,refresh:o}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Te=(e,t)=>{const r=R.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>R.createElement("svg",{ref:d,...Cv,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Ov(e)}`,a].join(" "),...c},[...t.map(([p,h])=>R.createElement(p,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Fa({isOpen:e,onClose:t,title:r,children:n}){const s=R.useRef(null);R.useEffect(()=>{const o=a=>{a.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[e,t]);const i=o=>{s.current&&!s.current.contains(o.target)&&t()};return e?u.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-slate-900/50 p-0 sm:p-4 backdrop-blur-sm animate-in fade-in duration-200",onClick:i,children:u.jsxs("div",{ref:s,className:"relative w-full max-w-lg max-h-[95vh] sm:max-h-[90vh] overflow-y-auto rounded-t-2xl sm:rounded-2xl border-t border-slate-200 sm:border bg-white shadow-2xl animate-in slide-in-from-bottom sm:zoom-in-95 duration-200",children:[u.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-slate-200 bg-white px-4 py-3 sm:px-6 sm:py-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900 sm:text-xl",children:r}),u.jsx("button",{onClick:t,className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 active:scale-95 transition-all","aria-label":"Close modal",children:u.jsx(Vv,{size:20})})]}),u.jsx("div",{className:"p-4 sm:p-6",children:n})]})}):null}const Wv=["Twitter","Email","Slack group","Direct outreach","Referral","Organic","Paid","Other"];function Hv(e){var r,n,s,i;const t=[];return(r=e.mvp)!=null&&r.trim()||t.push({field:"mvp",message:"MVP is required."}),e.week||t.push({field:"week",message:"Week is required."}),(n=e.name)!=null&&n.trim()||t.push({field:"name",message:"Name is required."}),e.status||t.push({field:"status",message:"Status is required."}),e.metric||t.push({field:"metric",message:"Metric is required."}),e.target>0||t.push({field:"target",message:"Target % must be greater than 0."}),e.next_action&&e.next_action.length>120&&t.push({field:"next_action",message:"Next Action max 120 chars. Put details in Notes."}),e.status==="Decided"&&((s=e.next_action)!=null&&s.trim()||t.push({field:"next_action",message:"Next Action required to mark Decided."}),(i=e.owner)!=null&&i.trim()||t.push({field:"owner",message:"Owner required to mark Decided."}),e.due||t.push({field:"due",message:"Due date required to mark Decided."})),t}function qv({onSubmit:e,onCancel:t,onSuggest:r,initialData:n,isSubmitting:s,error:i,isEditMode:o}){var v;const a=R.useRef(null),[l,c]=R.useState({mvp:(n==null?void 0:n.mvp)||"",name:(n==null?void 0:n.name)||"",status:(n==null?void 0:n.status)||"Inbox",metric:(n==null?void 0:n.metric)||"Conversion %",target:(n==null?void 0:n.target)||10,result:(n==null?void 0:n.result)??null,week:(n==null?void 0:n.week)||Ir(uf()),next_action:(n==null?void 0:n.next_action)||"",action_type:(n==null?void 0:n.action_type)||"Iterate",notes:(n==null?void 0:n.notes)||"",owner:(n==null?void 0:n.owner)||"",due:(n==null?void 0:n.due)||"",channel:(n==null?void 0:n.channel)??null,channel_detail:(n==null?void 0:n.channel_detail)||"",exposure_n:(n==null?void 0:n.exposure_n)??null}),[d,p]=R.useState([]),h=w=>{var S;return(S=d.find(b=>b.field===w))==null?void 0:S.message},m=w=>!!h(w),y=(w,S)=>S?w.replace("border-slate-300","border-rose-300").replace("focus:border-emerald-500","focus:border-rose-500").replace("focus:ring-emerald-500/20","focus:ring-rose-200"):w;R.useEffect(()=>{var w;(w=a.current)==null||w.focus()},[]);const _=async w=>{var E,N,A,I,J;w.preventDefault(),p([]);const S=Hv(l);if(S.length>0){p(S);return}const b={...l,due:((E=l.due)==null?void 0:E.trim())||void 0,owner:((N=l.owner)==null?void 0:N.trim())||void 0,next_action:((A=l.next_action)==null?void 0:A.trim())||void 0,notes:((I=l.notes)==null?void 0:I.trim())||void 0,channel_detail:((J=l.channel_detail)==null?void 0:J.trim())||void 0,exposure_n:l.exposure_n??void 0};await e(b)},k=()=>{if(!l.result||l.result===null)return"";const w=l.result;return w>=l.target?"Double-Down":w<=l.target*.5?"Kill":"Iterate"},g=w=>({"Double-Down":"bg-emerald-100 text-emerald-800 border-emerald-200",Iterate:"bg-amber-100 text-amber-800 border-amber-200",Kill:"bg-rose-100 text-rose-800 border-rose-200","":"bg-slate-100 text-slate-700 border-slate-200"})[w]||"bg-slate-100 text-slate-700 border-slate-200",f=(w,S)=>{c(b=>({...b,[w]:S}))};return u.jsxs("form",{onSubmit:_,className:"space-y-5",children:[d.length>0&&u.jsxs("div",{role:"alert",className:"rounded-lg border border-rose-200 bg-rose-50 p-3 text-rose-800",children:[u.jsxs("div",{className:"font-semibold",children:["Please fix ",d.length," ",d.length>1?"items":"item",":"]}),u.jsx("ul",{className:"mt-1 list-disc pl-5 text-sm",children:d.map((w,S)=>u.jsx("li",{children:w.message},S))})]}),i&&u.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-800",children:i}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"mvp",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["MVP ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"mvp",type:"text",value:l.mvp,onChange:w=>f("mvp",w.target.value),placeholder:"e.g., Paywall",className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("mvp")),required:!0}),m("mvp")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("mvp")})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"week",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Week ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"week",type:"date",value:l.week,onChange:w=>f("week",w.target.value),className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("week"))}),m("week")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("week")})]})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"name",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{ref:a,id:"name",type:"text",value:l.name,onChange:w=>f("name",w.target.value),placeholder:"e.g., Homepage CTA Redesign",className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("name")),required:!0}),m("name")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("name")})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"status",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Status ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{id:"status",value:l.status,onChange:w=>f("status",w.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",children:[u.jsx("option",{value:"Inbox",children:"Inbox"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Review",children:"Review"}),u.jsx("option",{value:"Decided",children:"Decided"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"metric",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Metric ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{id:"metric",value:l.metric,onChange:w=>f("metric",w.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",children:[u.jsx("option",{children:"Conversion %"}),u.jsx("option",{children:"Activation %"}),u.jsx("option",{children:"FreePaid %"}),u.jsx("option",{children:"MRR %"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"target",className:"mb-1.5 block text-sm font-medium text-slate-700",children:["Target (%) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"target",type:"number",min:"0",step:"0.1",value:l.target,onChange:w=>f("target",parseFloat(w.target.value)||0),className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("target"))}),m("target")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("target")})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"result",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Result (%)"}),u.jsx("input",{id:"result",type:"number",min:"0",step:"0.1",value:l.result??"",onChange:w=>f("result",w.target.value?parseFloat(w.target.value):null),placeholder:"Leave blank if no data",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"exposure_n",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Exposure (n)"}),u.jsx("input",{id:"exposure_n",type:"number",min:"0",step:"1",value:l.exposure_n??"",onChange:w=>f("exposure_n",w.target.value?parseInt(w.target.value):null),placeholder:"e.g., 120",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"calc_k",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Quick calc (k/n  Result % + n)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"calc_k",placeholder:"k (successes)",type:"number",min:0,onBlur:w=>{var E;const S=Number(w.target.value||0),b=Number(((E=document.getElementById("calc_n"))==null?void 0:E.value)||0);b>0&&(f("result",+(S/b*100).toFixed(2)),f("exposure_n",b))},className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"}),u.jsx("input",{id:"calc_n",placeholder:"n (trials)",type:"number",min:0,onBlur:w=>{const S=Number(w.target.value||0),b=document.getElementById("calc_k"),E=Number((b==null?void 0:b.value)||0);S>0&&(f("result",+(E/S*100).toFixed(2)),f("exposure_n",S))},className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"owner",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Owner"}),u.jsx("input",{id:"owner",type:"text",value:l.owner,onChange:w=>f("owner",w.target.value),placeholder:"Who's responsible?",className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("owner"))}),m("owner")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("owner")})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"due",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Due Date"}),u.jsx("input",{id:"due",type:"date",value:l.due,onChange:w=>f("due",w.target.value),className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("due"))}),m("due")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("due")})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"channel",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Source / Channel"}),u.jsxs("select",{id:"channel",value:l.channel??"",onChange:w=>f("channel",w.target.value?w.target.value:null),className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("channel")),children:[u.jsx("option",{value:"",children:"None"}),Wv.map(w=>u.jsx("option",{value:w,children:w},w))]}),m("channel")&&u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("channel")})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"channel_detail",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Channel Detail (optional)"}),u.jsx("input",{id:"channel_detail",type:"text",value:l.channel_detail,onChange:w=>f("channel_detail",w.target.value),placeholder:"e.g., 'List A', 'IH DMs', 'Cohort 2'",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"action_type",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Action Type"}),u.jsxs("select",{id:"action_type",value:l.action_type||"Iterate",onChange:w=>f("action_type",w.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",children:[u.jsx("option",{value:"Ship",children:"Ship"}),u.jsx("option",{value:"Iterate",children:"Iterate"}),u.jsx("option",{value:"Analyze",children:"Analyze"}),u.jsx("option",{value:"Fix",children:"Fix"}),u.jsx("option",{value:"Pause",children:"Pause"})]})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{htmlFor:"next_action",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Next Action (max 120 chars)"}),u.jsx("input",{id:"next_action",type:"text",value:l.next_action,onChange:w=>f("next_action",w.target.value),placeholder:"One line: what happens next?",maxLength:120,className:y("w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",h("next_action"))}),m("next_action")?u.jsx("div",{className:"mt-1 text-[10px] text-rose-600",children:h("next_action")}):u.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[((v=l.next_action)==null?void 0:v.length)||0,"/120"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"notes",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Notes"}),u.jsx("textarea",{id:"notes",value:l.notes,onChange:w=>f("notes",w.target.value),rows:4,placeholder:"Context, reasoning, details...",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),l.result!==null&&l.result!==void 0&&u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[u.jsx("div",{className:"mb-2 text-sm font-medium text-slate-700",children:"Verdict preview"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-medium ${g(k())}`,children:k()}),u.jsx("span",{className:"text-xs text-slate-500",children:"Based on Result vs Target"})]}),u.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o&&r&&u.jsx("button",{type:"button",onClick:r,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-700 hover:bg-slate-50",title:"Open Decision Suggestor",children:"Suggest verdict"}),u.jsx("span",{className:"ml-auto text-[10px] text-slate-500",children:"Preview only  not saved"})]})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4",children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Shortcut: /Ctrl+Enter to save"}),u.jsxs("div",{className:"flex flex-col-reverse gap-3 sm:flex-row",children:[u.jsx("button",{type:"button",onClick:t,disabled:s,className:"rounded-xl border-2 border-slate-300 bg-white px-5 py-3 text-base font-medium text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:s,className:"rounded-xl bg-emerald-600 px-5 py-3 text-base font-semibold text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:bg-emerald-400",children:s?n?"Saving...":"Creating...":n?"Save Changes":"Create Variant"})]})]})]})}function Kv({onSubmit:e,mode:t,onToggleMode:r,isLoading:n}){const[s,i]=R.useState(""),[o,a]=R.useState(""),[l,c]=R.useState(null),d=async h=>{if(h.preventDefault(),c(null),console.log("[AuthForm] Form submitted, mode:",t),!s.trim()||!o.trim()){c("Please fill in all fields");return}if(o.length<6){c("Password must be at least 6 characters");return}console.log("[AuthForm] Calling onSubmit...");const{error:m}=await e(s,o);m?(console.error("[AuthForm] Auth error received:",m.message),c(m.message)):console.log("[AuthForm] Auth successful, waiting for redirect...")},p=t==="signup";return u.jsxs("form",{onSubmit:d,className:"space-y-5",children:[l&&u.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-800",children:l}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Email"}),u.jsx("input",{id:"email",type:"email",value:s,onChange:h=>i(h.target.value),placeholder:"you@example.com",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",required:!0,autoComplete:"email"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"mb-1.5 block text-sm font-medium text-slate-700",children:"Password"}),u.jsx("input",{id:"password",type:"password",value:o,onChange:h=>a(h.target.value),placeholder:"",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",required:!0,autoComplete:p?"new-password":"current-password"}),p&&u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Must be at least 6 characters"})]}),u.jsx("button",{type:"submit",disabled:n,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-5 py-3 text-base font-semibold text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:bg-emerald-400",children:n?"Loading...":u.jsxs(u.Fragment,{children:[p?u.jsx(zv,{size:20}):u.jsx($v,{size:20}),p?"Create Account":"Sign In"]})}),u.jsx("div",{className:"text-center",children:u.jsx("button",{type:"button",onClick:r,className:"text-sm text-slate-600 hover:text-slate-900",children:p?u.jsxs(u.Fragment,{children:["Already have an account? ",u.jsx("span",{className:"font-semibold text-emerald-600",children:"Sign in"})]}):u.jsxs(u.Fragment,{children:["Don't have an account? ",u.jsx("span",{className:"font-semibold text-emerald-600",children:"Sign up"})]})})})]})}function Gv(){const[e,t]=R.useState("signin"),[r,n]=R.useState(!1),{signIn:s,signUp:i}=Fl(),o=async(l,c)=>{console.log("[AuthPage] handleSubmit called, mode:",e),n(!0);try{const d=e==="signin"?await s(l,c):await i(l,c);return console.log("[AuthPage] Auth result:",d.error?"error":"success"),d}finally{n(!1)}},a=()=>{t(e==="signin"?"signup":"signin")};return u.jsx("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-slate-50 to-slate-100",children:u.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsx("div",{className:"mb-4 inline-flex items-center justify-center rounded-2xl bg-emerald-100 p-3",children:u.jsx(Fv,{size:32,className:"text-emerald-600"})}),u.jsx("h1",{className:"mb-2 text-3xl font-bold tracking-tight text-slate-900",children:e==="signin"?"Welcome Back":"Get Started"}),u.jsx("p",{className:"text-slate-600",children:e==="signin"?"Sign in to access your MVP dashboard":"Create an account to start tracking your variants"})]}),u.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-lg",children:u.jsx(Kv,{onSubmit:o,mode:e,onToggleMode:a,isLoading:r})}),u.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:"Essentialist MVP Decision Dashboard"})]})})})}function cf({isOpen:e,onClose:t,trigger:r,children:n,className:s="",minWidth:i=192}){const o=R.useRef(null),[a,l]=R.useState(null);return R.useEffect(()=>{if(!e||!r){l(null);return}const c=()=>{var J;const h=r.getBoundingClientRect(),m=((J=o.current)==null?void 0:J.offsetHeight)||200,y=i,_=window.innerWidth,k=window.innerHeight,g=k-h.bottom,f=h.top,v=_-h.right,w=h.left;let S=0,b=0,E,N="bottom-right";const A=g>=m||g>f,I=v>=y||v>w;A?(S=h.bottom+4,I?(b=h.right-y,N="bottom-right"):(b=h.left,N="bottom-left")):(S=h.top-m-4,I?(b=h.right-y,N="top-right"):(b=h.left,N="top-left")),b=Math.max(8,Math.min(b,_-y-8)),S=Math.max(8,Math.min(S,k-m-8)),l({top:S,left:b,right:E,placement:N})};c();const d=()=>c(),p=()=>c();return window.addEventListener("scroll",d,!0),window.addEventListener("resize",p),()=>{window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",p)}},[e,r,i]),R.useEffect(()=>{if(!e)return;const c=p=>{o.current&&!o.current.contains(p.target)&&r&&!r.contains(p.target)&&t()},d=p=>{p.key==="Escape"&&t()};return document.addEventListener("mousedown",c),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",d)}},[e,t,r]),!e||!a?null:zh.createPortal(u.jsx("div",{ref:o,className:`fixed z-[9999] animate-in fade-in-0 zoom-in-95 duration-100 ${s}`,style:{top:`${a.top}px`,left:`${a.left}px`,minWidth:`${i}px`},role:"menu","aria-orientation":"vertical",children:n}),document.body)}function Jv(){var o;const[e,t]=R.useState(!1),r=R.useRef(null),{user:n,signOut:s}=Fl(),i=async()=>{await s(),t(!1)};return n?u.jsxs(u.Fragment,{children:[u.jsxs("button",{ref:r,onClick:()=>t(!e),className:"flex items-center gap-2 rounded-xl border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm transition-all sm:text-base","aria-expanded":e,"aria-haspopup":"true",children:[u.jsx(Bv,{size:18}),u.jsx("span",{children:(o=n.email)==null?void 0:o.split("@")[0]})]}),u.jsxs(cf,{isOpen:e,onClose:()=>t(!1),trigger:r.current,minWidth:256,className:"rounded-xl border border-slate-200 bg-white shadow-xl",children:[u.jsxs("div",{className:"border-b border-slate-100 p-3",children:[u.jsx("p",{className:"text-xs text-slate-500",children:"Signed in as"}),u.jsx("p",{className:"truncate text-sm font-medium text-slate-900",children:n.email})]}),u.jsx("div",{className:"p-2",children:u.jsxs("button",{onClick:i,className:"flex w-full items-center gap-2 rounded-lg px-3 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[u.jsx(Lv,{size:18}),"Sign Out"]})})]})]}):null}function Qv(e){const{result:t,target:r,effort:n,n:s,confidence:i}=e;let o=null,a="",l="low";return t!==void 0&&s!==void 0?(t>=r&&(n==="S"||n==="M")?(o="Double-Down",a="Strong result on low/medium effort."):s<100&&t<.5*r?(o="Kill",a="Low sample and underperforming."):(o="Iterate",a="Mixed or inconclusive."),l=s<50?"low":s<150?"medium":"high"):i!==void 0&&(i>=80&&(n==="S"||n==="M")?(o="Double-Down",a="High confidence with low/medium effort."):i<=30?(o="Kill",a="Low confidence."):(o="Iterate",a="Medium confidence, needs testing."),l=i<40?"low":i<70?"medium":"high"),{verdict:o,rationale:a,evidenceLevel:l}}function Yv({isOpen:e,onClose:t,onSuggest:r}){const[n,s]=R.useState(1),[i,o]=R.useState({type:"landing",effort:"M",target:10}),[a,l]=R.useState(null);R.useEffect(()=>{const k=Qv(i);l(k)},[i]);const c=(k,g)=>{o(f=>({...f,[k]:g}))},d=()=>{o({type:"landing",effort:"M",target:10}),s(1)},p=()=>{d(),t()},h=i.result!==void 0&&i.n!==void 0,m=i.target>0,y=()=>s(2),_=()=>s(1);return u.jsx(Fa,{isOpen:e,onClose:p,title:"Guided Decision Suggestor",children:u.jsxs("div",{className:"space-y-6",role:"form","aria-label":"Guided decision form",children:[n===1&&u.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[u.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:u.jsx("p",{children:"Let's gather some context about your test to suggest the best decision."})}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"test-type",className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Test type ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{id:"test-type",value:i.type,onChange:k=>c("type",k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-base transition-all focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20","aria-label":"Select test type",children:[u.jsx("option",{value:"landing",children:"Landing Page"}),u.jsx("option",{value:"form",children:"Form / Flow"}),u.jsx("option",{value:"micro-app",children:"Micro-App"})]}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"What kind of test are you running?"})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"target",className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Target (%) ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"target",type:"number",min:"0.1",step:"0.1",value:i.target,onChange:k=>c("target",parseFloat(k.target.value)||0),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-base transition-all focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"e.g., 10","aria-label":"Target percentage",required:!0}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Your success threshold"})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"effort",className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Effort ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{id:"effort",value:i.effort,onChange:k=>c("effort",k.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-base transition-all focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20","aria-label":"Select effort level",children:[u.jsx("option",{value:"S",children:"Small (S) - Quick win, low investment"}),u.jsx("option",{value:"M",children:"Medium (M) - Moderate effort"}),u.jsx("option",{value:"L",children:"Large (L) - Significant investment"})]}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"How much work did this require?"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[u.jsx("button",{type:"button",onClick:p,className:"rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50",children:"Cancel"}),u.jsxs("button",{type:"button",onClick:y,disabled:!m,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-semibold text-white transition-all hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-emerald-600","aria-label":"Continue to step 2",children:["Next",u.jsx(Pv,{size:16})]})]})]}),n===2&&u.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[u.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600",children:u.jsx("p",{children:"Now add your results. Have data? Enter it below. No data yet? Use the confidence slider."})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"result",className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Result (%)"}),u.jsx("input",{id:"result",type:"number",min:"0",step:"0.1",value:i.result??"",onChange:k=>c("result",k.target.value?parseFloat(k.target.value):void 0),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-base transition-all focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"Leave blank if no data yet","aria-label":"Result percentage"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"The conversion rate you observed"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"exposure-n",className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Exposure (n)"}),u.jsx("input",{id:"exposure-n",type:"number",min:"0",step:"1",value:i.n??"",onChange:k=>c("n",k.target.value?parseInt(k.target.value):void 0),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-base transition-all focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",placeholder:"e.g., 150","aria-label":"Number of exposures"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"How many people saw this test?"})]}),u.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[u.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[u.jsx("label",{htmlFor:"confidence-slider",className:"text-sm font-medium text-slate-700",children:"No numbers? Rate your confidence"}),u.jsxs("button",{type:"button",className:"group relative","aria-label":"Information about confidence slider",children:[u.jsx(Iv,{size:16,className:"text-slate-400 hover:text-slate-600"}),u.jsx("span",{className:"pointer-events-none absolute -top-12 left-1/2 z-10 w-48 -translate-x-1/2 rounded-lg bg-slate-800 px-3 py-2 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Use this if you don't have numeric results yet. Slide to express how confident you feel."})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Low"}),u.jsx("input",{id:"confidence-slider",type:"range",min:0,max:100,value:i.confidence??50,onChange:k=>c("confidence",parseInt(k.target.value)),disabled:h,className:"flex-1 accent-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Confidence level slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":i.confidence??50}),u.jsx("span",{className:"text-xs font-medium text-slate-500",children:"High"})]}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsxs("span",{className:"text-lg font-semibold text-slate-800",children:[i.confidence??50,"%"]}),u.jsx("span",{className:"ml-1 text-sm text-slate-600",children:"confidence"})]}),h&&u.jsx("p",{className:"mt-2 text-xs text-slate-600",children:"Disabled: Using numeric data instead"})]}),a&&u.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 rounded-xl border-2 border-slate-200 bg-gradient-to-br from-slate-50 to-white p-5 shadow-sm",children:[u.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[u.jsx(Nc,{size:16,className:"text-emerald-600"}),u.jsx("div",{className:"text-sm font-semibold text-slate-700",children:"Suggested Verdict"})]}),u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("span",{className:`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-semibold transition-all duration-300 hover:scale-105 ${lf(a.verdict||"")}`,role:"status","aria-label":`Verdict: ${a.verdict||"Not determined"}`,children:a.verdict||""}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Evidence:"}),u.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-semibold ${xv(a.evidenceLevel)}`,children:[u.jsx("span",{children:_v(a.evidenceLevel)}),u.jsx("span",{children:a.evidenceLevel})]})]})]}),u.jsx("div",{className:"rounded-lg bg-white border border-slate-100 p-3 text-sm text-slate-700 leading-relaxed",children:a.rationale}),u.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-slate-500 italic",children:"Preview only  not saved"}),u.jsx("div",{className:"flex items-center gap-1.5 text-xs text-slate-400",children:u.jsxs("span",{children:["Based on ",h?"numeric data":"confidence"]})})]})]}),u.jsxs("div",{className:"flex justify-between items-center gap-3 pt-6 border-t border-slate-200",children:[u.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50","aria-label":"Go back to step 1",children:[u.jsx(Rv,{size:16}),"Back"]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"button",onClick:p,className:"rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50",children:"Cancel"}),r&&a&&a.verdict&&u.jsxs("button",{type:"button",onClick:()=>r(a,i),className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-5 py-2.5 text-sm font-semibold text-white transition-all hover:bg-emerald-700 hover:shadow-lg hover:scale-105 active:scale-100",title:"Apply this verdict to your variant","aria-label":"Apply suggested verdict",children:[u.jsx(Nc,{size:16}),"Apply Suggestion"]})]})]})]})]})})}const Xv=["Twitter","Email","Slack group","Direct outreach","Referral","Organic","Paid","Other"];function ke({text:e,className:t=""}){return u.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-medium ${t}`,children:e})}function Tc({title:e,subtitle:t,right:r,children:n}){return u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm overflow-visible",children:[u.jsxs("div",{className:"mb-3 flex items-end justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:e}),t&&u.jsx("p",{className:"text-sm text-slate-500",children:t})]}),r]}),n]})}function Zv(){var Hl;const{user:e,loading:t}=Fl(),[r,n]=R.useState("library"),{variants:s,loading:i,error:o,updateVariant:a,addVariant:l,deleteVariant:c}=Tv(),[d,p]=R.useState(""),[h,m]=R.useState("All"),[y,_]=R.useState("All"),[k,g]=R.useState("All"),[f,v]=R.useState(!1),[w,S]=R.useState(!1),[b,E]=R.useState(null),[N,A]=R.useState(null),[I,J]=R.useState(new Set),[Ct,ye]=R.useState(null),[mt,ms]=R.useState(!1),[_r,br]=R.useState(!1),[C,D]=R.useState(null),[M,Q]=R.useState("simple"),[ie,Ie]=R.useState(null),Ye=R.useRef(new Map),[gs,gt]=R.useState([]),[F,vs]=R.useState({open:!1,v:null}),[ys,qi]=R.useState({open:!1,v:null}),ut=R.useMemo(()=>Sv(),[]),df=R.useMemo(()=>["All",...Array.from(new Set(s.map(x=>x.mvp).filter(Boolean)))],[s]);function Zt(x,$={}){const T={type:x,at:new Date().toISOString(),...$};console.log("[event]",T),gt(z=>[T,...z].slice(0,200))}function ws(x){const $=Nv(x);vs({open:!0,v:x,res:$}),Zt("suggest_open",{id:x.id,name:x.name})}function Ki(x){qi({open:!0,v:x}),Zt("guided_modal_open",{id:x.id,name:x.name})}async function hf(x,$){if(!(!ys.v||!x.verdict))try{await a(ys.v.id,{verdict_manual:x.verdict}),ye(`Guided verdict applied: ${x.verdict}`),setTimeout(()=>ye(null),3e3),qi({open:!1,v:null}),Zt("guided_verdict_apply",{id:ys.v.id,verdict:x.verdict,rationale:x.rationale,evidenceLevel:x.evidenceLevel,input:$})}catch(T){A(T instanceof Error?T.message:"Failed to apply verdict"),setTimeout(()=>A(null),5e3)}}const Gi=R.useMemo(()=>s.filter(x=>{const $=h==="All"||x.mvp===h,T=y==="All"||x.status===y,z=!d||x.name.toLowerCase().includes(d.toLowerCase()),er=k==="All"||x.channel===k;return $&&T&&z&&er}),[s,d,h,y,k]),Xe=R.useMemo(()=>s.filter(x=>x.status==="Review"),[s]),hn=R.useMemo(()=>mt?Xe:s.filter(x=>x.status==="Review"&&bn(x.week,ut)),[s,ut,mt,Xe]),fn=R.useMemo(()=>{const x={"Double-Down":[],Iterate:[],Kill:[],"":[]};return hn.forEach($=>x[zs($)].push($)),x},[hn]);R.useEffect(()=>{const x=$=>{if($.key.toLowerCase()==="n"&&!w){const T=$.target;T.tagName!=="INPUT"&&T.tagName!=="TEXTAREA"&&T.tagName!=="SELECT"&&($.preventDefault(),Vl())}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[w]);const Ji=async x=>{const $=s.find(T=>T.id===x);if($){if(!$.owner||!$.next_action||!$.due){E({...$,status:"Decided"}),S(!0);return}J(T=>new Set(T).add(x));try{await a(x,{status:"Decided"}),ye("Variant marked as decided!"),setTimeout(()=>ye(null),3e3)}catch(T){const z=T instanceof Error?T.message:"Failed to mark as decided";A(z),setTimeout(()=>A(null),5e3)}finally{J(T=>{const z=new Set(T);return z.delete(x),z})}}},zl=async x=>{const $=Ir(uf(new Date(new Date(x.week).getTime()+6048e5))),T={mvp:x.mvp,name:x.name,status:"Inbox",metric:x.metric,target:x.target,week:$,iteration:(x.iteration||1)+1,channel:x.channel??null,channel_detail:x.channel_detail??null};v(!0);try{await l(T),ye("Variant duplicated as next iteration!"),setTimeout(()=>ye(null),3e3)}catch(z){A(z instanceof Error?z.message:"Failed to duplicate variant"),setTimeout(()=>A(null),5e3)}finally{v(!1)}},Bl=async(x,$)=>{const T=$===""?null:Number($);if(!($!==""&&Number.isNaN(T))){J(z=>new Set(z).add(x));try{await a(x,{result:T})}catch(z){A(z instanceof Error?z.message:"Failed to update result"),setTimeout(()=>A(null),5e3)}finally{J(z=>{const er=new Set(z);return er.delete(x),er})}}},Vl=()=>{A(null),E(null),S(!0)},Qi=()=>{S(!1),E(null),A(null)},Yi=x=>{E(x),S(!0),A(null)},ff=async x=>{v(!0),A(null);try{if(b)await a(b.id,x),ye("Variant updated!"),setTimeout(()=>ye(null),3e3);else if(!await l(x)){A("Failed to create variant. Please try again.");return}n("library"),Qi()}catch($){A($ instanceof Error?$.message:"An error occurred")}finally{v(!1)}},Wl=async x=>{J($=>new Set($).add(x));try{await c(x),ye("Variant deleted!"),setTimeout(()=>ye(null),3e3),D(null)}catch($){const T=$ instanceof Error?$.message:"Failed to delete variant";A(T),setTimeout(()=>A(null),5e3)}finally{J($=>{const T=new Set($);return T.delete(x),T})}};return t?u.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:u.jsx("div",{className:"text-slate-600",children:"Loading..."})}):e?i?u.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:u.jsx("div",{className:"text-slate-600",children:"Loading..."})}):u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[u.jsxs("div",{className:"mx-auto max-w-6xl space-y-4 p-3 sm:space-y-6 sm:p-6",children:[o&&u.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-800",children:[u.jsx("strong",{children:"Error:"})," ",o]}),N&&u.jsxs("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-800",children:[u.jsx("strong",{children:"Error:"})," ",N]}),Ct&&u.jsx("div",{className:"rounded-xl border border-green-200 bg-green-50 p-4 text-sm text-green-800",children:Ct}),u.jsxs("header",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("h1",{className:"text-xl font-bold tracking-tight text-slate-900 sm:text-2xl",children:"Essentialist MVP Decision Dashboard"}),u.jsx("p",{className:"text-sm text-slate-500 sm:text-base",children:"One table, two views. Decide fast, act faster."})]}),u.jsx(Jv,{})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-[1fr_auto]",children:[u.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-slate-100 p-1.5",children:[u.jsx("button",{onClick:()=>n("library"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-all sm:text-base ${r==="library"?"bg-slate-900 text-white shadow-sm":"text-slate-700 hover:text-slate-900"}`,children:"Library"}),u.jsx("button",{onClick:()=>n("decisions"),className:`flex-1 rounded-lg px-4 py-2.5 text-sm font-medium transition-all sm:text-base ${r==="decisions"?"bg-slate-900 text-white shadow-sm":"text-slate-700 hover:text-slate-900"}`,children:"Decisions"})]}),u.jsx("button",{onClick:Vl,className:"rounded-xl bg-emerald-600 px-6 py-2.5 text-sm font-semibold text-white shadow-md hover:bg-emerald-700 hover:shadow-lg active:scale-95 transition-all sm:text-base",title:"Shortcut: N",children:"+ New Variant"})]})]}),r==="library"&&u.jsxs(Tc,{title:"Variant Library",subtitle:"Your single source of truth",right:u.jsxs("div",{className:"hidden md:flex items-center gap-2 rounded-lg border border-slate-300 bg-white p-1",children:[u.jsx("button",{onClick:()=>Q("simple"),className:`rounded px-3 py-1.5 text-xs font-medium transition-colors ${M==="simple"?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-50"}`,children:"Simple"}),u.jsx("button",{onClick:()=>Q("detailed"),className:`rounded px-3 py-1.5 text-xs font-medium transition-colors ${M==="detailed"?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-50"}`,children:"Detailed"})]}),children:[(()=>{const x=Gi.filter(T=>T.status==="Review"&&T.result!==void 0&&T.channel),$=Array.from(x.reduce((T,z)=>{const er=z.channel,Xi=T.get(er)??{total:0,wins:0};return Xi.total+=1,Xi.wins+=zs(z)==="Double-Down"?1:0,T.set(er,Xi),T},new Map));return $.length>0?u.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:$.map(([T,z])=>u.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs",children:[u.jsx(ke,{text:T,className:kn(T)}),u.jsxs("span",{className:"text-slate-700",children:[z.wins,"/",z.total," wins  ",Math.round(z.wins/z.total*100),"%"]})]},T))}):null})(),u.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[u.jsx("input",{value:d,onChange:x=>p(x.target.value),placeholder:"Search variants...",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]"}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[u.jsx("select",{value:h,onChange:x=>m(x.target.value),className:"flex-1 rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]",children:df.map(x=>u.jsx("option",{children:x},x))}),u.jsxs("select",{value:y,onChange:x=>_(x.target.value),className:"flex-1 rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]",children:[u.jsx("option",{children:"All"}),u.jsx("option",{children:"Inbox"}),u.jsx("option",{children:"Running"}),u.jsx("option",{children:"Review"}),u.jsx("option",{children:"Decided"})]}),u.jsxs("select",{value:k,onChange:x=>g(x.target.value),className:"flex-1 rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]",children:[u.jsx("option",{children:"All"}),Xv.map(x=>u.jsx("option",{children:x},x))]})]})]}),u.jsx("div",{className:"space-y-3 md:hidden",children:Gi.map(x=>{const $=zs(x);return u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[u.jsxs("div",{className:"mb-3 flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"break-words font-semibold text-slate-900 text-sm leading-tight mb-1",children:x.mvp||"No MVP"}),u.jsxs("div",{className:"break-words text-sm text-slate-600 leading-snug mb-2",children:[x.name,x.iteration?u.jsxs("span",{className:"text-xs text-slate-400 ml-1",children:[" v",x.iteration]}):null]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx(ke,{text:x.status,className:Sc(x.status)}),u.jsx(ke,{text:$,className:$o($)}),x.channel&&u.jsx(ke,{text:x.channel,className:kn(x.channel)}),x.action_type&&u.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs font-medium text-slate-700 whitespace-nowrap",children:x.action_type})]})]}),u.jsx(ke,{text:x.metric,className:"bg-slate-100 text-slate-700 border-slate-200 text-xs whitespace-nowrap flex-shrink-0"})]}),u.jsx("div",{className:"mb-3 rounded-lg bg-slate-50 px-3 py-2.5",children:u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("div",{className:"text-slate-600",children:[u.jsx("span",{className:"font-semibold",children:"Target:"})," ",x.target,"%"]}),u.jsxs("div",{className:"text-slate-600",children:[u.jsx("span",{className:"font-semibold",children:"Result:"})," ",x.result??"","%"]})]})}),u.jsxs("details",{className:"mb-3",children:[u.jsx("summary",{className:"cursor-pointer select-none rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-900 min-h-[44px] flex items-center",children:"View details"}),u.jsxs("div",{className:"mt-3 space-y-3 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[x.next_action&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 mb-1",children:"Next Action"}),u.jsx("div",{className:"text-sm text-slate-700",children:x.next_action})]}),x.notes&&x.notes.trim()&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 mb-1",children:"Notes"}),u.jsx("div",{className:"text-sm text-slate-700 whitespace-pre-wrap break-words",children:x.notes})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 mb-1",children:"Week"}),u.jsx("div",{className:"text-slate-700",children:Rt(x.week)})]}),x.owner&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 mb-1",children:"Owner"}),u.jsx("div",{className:"text-slate-700",children:x.owner})]}),x.due&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-semibold uppercase text-slate-500 mb-1",children:"Due"}),u.jsx("div",{className:"text-slate-700",children:Rt(x.due)})]})]})]})]}),C===x.id?u.jsxs("div",{className:"rounded-lg border-2 border-rose-200 bg-rose-50 p-3",children:[u.jsx("p",{className:"mb-3 text-sm font-medium text-rose-900",children:"Delete this variant?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>D(null),className:"flex-1 rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 transition-transform min-h-[44px]",children:"Cancel"}),u.jsx("button",{onClick:()=>Wl(x.id),disabled:I.has(x.id),className:"flex-1 rounded-lg bg-rose-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-rose-700 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 transition-transform min-h-[44px]",children:I.has(x.id)?"Deleting...":"Delete"})]})]}):u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("button",{onClick:()=>Yi(x),className:"w-full rounded-lg bg-slate-900 px-4 py-3 text-sm font-semibold text-white hover:bg-slate-800 active:scale-95 transition-transform min-h-[44px]",children:"Edit variant"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>zl(x),disabled:f,className:"flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 transition-transform min-h-[44px]",children:"Duplicate"}),u.jsx("button",{onClick:()=>D(x.id),className:"rounded-lg border border-rose-200 bg-white px-3 py-2.5 text-sm font-medium text-rose-600 hover:bg-rose-50 active:scale-95 transition-transform min-h-[44px]",children:"Delete"})]}),x.status!=="Decided"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>Ki(x),className:"flex-1 rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 transition-transform min-h-[44px]",children:"Guided"}),u.jsx("button",{onClick:()=>ws(x),className:"flex-1 rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 transition-transform min-h-[44px]",children:"Pro"})]}),u.jsx("button",{onClick:()=>Ji(x.id),disabled:I.has(x.id),className:"w-full rounded-lg border-2 border-emerald-600 bg-white px-4 py-2.5 text-sm font-semibold text-emerald-600 hover:bg-emerald-50 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 transition-transform min-h-[44px]",children:I.has(x.id)?"Saving...":"Mark decided"})]})]})]},x.id)})}),u.jsx("div",{className:"hidden md:block overflow-x-auto rounded-2xl border border-slate-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[u.jsx("thead",{className:"bg-slate-50 text-left text-slate-600",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-3 font-semibold",children:"MVP"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Name"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Status"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Channel"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Metric"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Target"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Result"}),M==="detailed"&&u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Week"}),u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Verdict"}),M==="detailed"&&u.jsx("th",{className:"px-3 py-3 font-semibold",children:"Owner"}),u.jsx("th",{className:"px-3 py-3 font-semibold text-right",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:Gi.map(x=>{const $=zs(x),T=ie===x.id;return u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-3 py-3 text-slate-700",children:x.mvp||""}),u.jsx("td",{className:"px-3 py-3 font-medium text-slate-900",children:u.jsxs("button",{onClick:()=>Yi(x),className:"max-w-[280px] truncate text-left hover:underline rounded focus:outline-none focus:ring-2 focus:ring-slate-300",title:"Edit variant","aria-label":`Edit ${x.name}`,children:[x.name," ",x.iteration?u.jsxs("span",{className:"text-xs text-slate-400",children:[" v",x.iteration]}):null]})}),u.jsx("td",{className:"px-3 py-3",children:u.jsx(ke,{text:x.status,className:Sc(x.status)})}),u.jsx("td",{className:"px-3 py-3",children:x.channel?u.jsx(ke,{text:x.channel,className:kn(x.channel)}):u.jsx("span",{className:"text-slate-400",children:""})}),u.jsx("td",{className:"px-3 py-3 text-slate-700",children:x.metric}),u.jsxs("td",{className:"px-3 py-3 text-slate-700",children:[x.target,"%"]}),u.jsx("td",{className:"px-3 py-3",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("input",{"aria-label":"Result percent",value:x.result??"",onChange:z=>Bl(x.id,z.target.value),onBlur:z=>Bl(x.id,z.target.value.trim()),placeholder:"",disabled:I.has(x.id),className:"w-16 rounded border border-slate-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 disabled:opacity-50"}),u.jsx("span",{className:"text-slate-500",children:"%"})]})}),M==="detailed"&&u.jsx("td",{className:"px-3 py-3 text-slate-700",children:Rt(x.week)}),u.jsx("td",{className:"px-3 py-3",children:u.jsx(ke,{text:$,className:$o($)})}),M==="detailed"&&u.jsx("td",{className:"px-3 py-3 text-slate-700",children:x.owner??""}),u.jsx("td",{className:"px-3 py-3",children:u.jsx("div",{className:"flex justify-end",children:C===x.id?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>D(null),className:"rounded border border-slate-300 bg-white px-2 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Cancel"}),u.jsx("button",{onClick:()=>Wl(x.id),disabled:I.has(x.id),className:"rounded bg-rose-600 px-2 py-1 text-xs font-semibold text-white hover:bg-rose-700 disabled:cursor-not-allowed disabled:opacity-50",children:I.has(x.id)?"Deleting...":"Confirm"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{ref:z=>{z?Ye.current.set(x.id,z):Ye.current.delete(x.id)},onClick:()=>Ie(T?null:x.id),className:"rounded-lg border border-slate-200 bg-white p-2 text-slate-700 hover:bg-slate-50",title:"Actions","aria-expanded":T,"aria-haspopup":"true",children:u.jsx(Uv,{className:"h-4 w-4"})}),u.jsx(cf,{isOpen:T,onClose:()=>Ie(null),trigger:Ye.current.get(x.id)||null,minWidth:192,className:"rounded-lg border border-slate-200 bg-white shadow-lg",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>{Yi(x),Ie(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",children:[u.jsx(Dv,{className:"h-4 w-4"}),"Edit variant"]}),u.jsxs("button",{onClick:()=>{zl(x),Ie(null)},disabled:f,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:[u.jsx(Av,{className:"h-4 w-4"}),"Duplicate"]}),u.jsxs("button",{onClick:()=>{D(x.id),Ie(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-rose-600 hover:bg-rose-50",children:[u.jsx(Mv,{className:"h-4 w-4"}),"Delete"]}),x.status!=="Decided"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{Ki(x),Ie(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",children:[u.jsx(Lo,{className:"h-4 w-4"}),"Guided verdict"]}),u.jsxs("button",{onClick:()=>{ws(x),Ie(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50",children:[u.jsx(Lo,{className:"h-4 w-4"}),"Pro verdict"]}),u.jsxs("button",{onClick:()=>{Ji(x.id),Ie(null)},disabled:I.has(x.id),className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-emerald-600 hover:bg-emerald-50 disabled:cursor-not-allowed disabled:opacity-50",children:[u.jsx(Lo,{className:"h-4 w-4"}),I.has(x.id)?"Saving...":"Mark decided"]})]})]})})]})})})]},x.id)})})]})})]}),r==="decisions"&&u.jsxs(u.Fragment,{children:[_r&&u.jsxs("div",{className:"rounded-2xl border border-blue-200 bg-blue-50 p-4 space-y-2 text-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-blue-900",children:"Debug Information"}),u.jsx("button",{onClick:()=>br(!1),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Hide"})]}),u.jsxs("div",{className:"text-blue-800 space-y-1",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Current week start (Monday):"})," ",Rt(Ir(ut))]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Week end (Sunday):"})," ",Rt(Ir(new Date(ut.getTime()+6*864e5)))]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Total variants:"})," ",s.length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Review status variants (all weeks):"})," ",Xe.length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Review variants THIS week:"})," ",s.filter(x=>x.status==="Review"&&bn(x.week,ut)).length]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Show all review items toggle:"})," ",mt?"ON":"OFF"]})]}),Xe.length>0&&u.jsxs("details",{className:"mt-2",children:[u.jsx("summary",{className:"cursor-pointer text-blue-700 font-medium",children:"Review variants by week"}),u.jsx("div",{className:"mt-2 space-y-1 text-xs",children:Xe.map(x=>u.jsxs("div",{className:"flex items-center justify-between gap-2 py-1 border-t border-blue-200",children:[u.jsxs("span",{className:"truncate",children:[x.mvp," - ",x.name]}),u.jsxs("span",{className:`rounded px-2 py-0.5 ${bn(x.week,ut)?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:[Rt(x.week)," ",bn(x.week,ut)?"(this week)":"(different week)"]})]},x.id))})]})]}),Xe.length>0&&!mt&&s.filter(x=>x.status==="Review"&&bn(x.week,ut)).length===0&&u.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[u.jsx("div",{className:"flex-shrink-0 text-xl sm:text-2xl",children:""}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-amber-900 mb-1 text-sm sm:text-base",children:"No review items for this week"}),u.jsxs("p",{className:"text-xs sm:text-sm text-amber-800 mb-3",children:["You have ",Xe.length," review ",Xe.length===1?"item":"items",' in other weeks. The "This Week Decisions" tab only shows review items where the week field matches this week (',Rt(Ir(ut)),")."]}),u.jsxs("button",{onClick:()=>ms(!0),className:"rounded-lg bg-amber-600 px-3 py-2 text-xs sm:text-sm font-medium text-white hover:bg-amber-700 active:scale-95 transition-transform",children:["Show all ",Xe.length," review ",Xe.length===1?"item":"items"]})]})]})}),u.jsxs(Tc,{title:"This Week Decisions",subtitle:mt?`All review items (${hn.length})`:`Review items for week of ${Rt(Ir(ut))} (${hn.length})`,children:[u.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[!_r&&u.jsx("button",{onClick:()=>br(!0),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm",children:"Show debug info"}),mt&&u.jsx("button",{onClick:()=>ms(!1),className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm",children:"Show only this week"})]}),u.jsxs("div",{className:"space-y-4 sm:grid sm:grid-cols-2 sm:gap-4 sm:space-y-0 lg:grid-cols-3",children:[["Double-Down","Iterate","Kill"].map(x=>{var $;return u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 sm:p-4",children:[u.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${x==="Double-Down"?"bg-emerald-500":x==="Iterate"?"bg-amber-500":"bg-rose-500"}`}),u.jsx("h3",{className:"text-sm font-semibold text-slate-800 sm:text-base",children:x})]}),u.jsx(ke,{text:`${(($=fn[x])==null?void 0:$.length)||0}`,className:"bg-white text-slate-700 border-slate-200"})]}),u.jsx("div",{className:"space-y-3",children:(fn[x]||[]).map(T=>u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[u.jsxs("div",{className:"mb-3 flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"break-words font-semibold text-slate-900 text-sm leading-tight mb-1",children:T.mvp}),u.jsx("div",{className:"break-words text-sm text-slate-600 leading-snug",children:T.name})]}),u.jsxs("div",{className:"flex flex-shrink-0 flex-col items-end gap-1.5",children:[T.channel&&u.jsx(ke,{text:T.channel,className:kn(T.channel)}),T.action_type&&u.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs font-medium text-slate-700 whitespace-nowrap",children:T.action_type}),u.jsx(ke,{text:T.metric,className:"bg-slate-100 text-slate-700 border-slate-200 text-xs whitespace-nowrap"})]})]}),u.jsxs("div",{className:"mb-3 rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[u.jsx("span",{className:"font-semibold",children:"Target:"})," ",T.target,"%    ",u.jsx("span",{className:"font-semibold",children:"Result:"})," ",T.result??"","%"]}),u.jsx("input",{placeholder:"Next action (one line, max 120 chars)",defaultValue:T.next_action||"",onBlur:z=>a(T.id,{next_action:z.target.value}),maxLength:120,className:"mb-3 w-full rounded-lg border border-slate-300 bg-white px-3 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]"}),T.notes&&T.notes.trim()&&u.jsxs("details",{className:"mb-3",children:[u.jsx("summary",{className:"cursor-pointer select-none rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-900 min-h-[44px] flex items-center",children:"View notes"}),u.jsx("div",{className:"mt-2 whitespace-pre-wrap rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm leading-relaxed break-words",children:T.notes})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex flex-col gap-2.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500 w-16 flex-shrink-0",children:"Owner"}),u.jsx("input",{placeholder:"Name",defaultValue:T.owner||"",onBlur:z=>a(T.id,{owner:z.target.value}),className:"flex-1 rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500 w-16 flex-shrink-0",children:"Due"}),u.jsx("input",{type:"date",defaultValue:T.due||"",onChange:z=>a(T.id,{due:z.target.value}),className:"flex-1 rounded-lg border border-slate-300 bg-white px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 min-h-[44px]"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>Ki(T),className:"flex-1 rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 transition-transform min-h-[44px]",children:"Guided"}),u.jsx("button",{onClick:()=>ws(T),className:"flex-1 rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 active:scale-95 transition-transform min-h-[44px]",children:"Pro"})]}),u.jsx("button",{onClick:()=>Ji(T.id),disabled:I.has(T.id),className:"w-full rounded-lg bg-slate-900 px-4 py-3 text-sm font-semibold text-white hover:bg-slate-800 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 transition-transform min-h-[44px]",children:I.has(T.id)?"Saving...":"Mark decided"})]})]},T.id))})]},x)}),fn[""].length>0&&u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[u.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-slate-400"}),u.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Need data"})]}),u.jsx(ke,{text:`${((Hl=fn[""])==null?void 0:Hl.length)||0}`,className:"bg-white text-slate-700 border-slate-200"})]}),u.jsx("div",{className:"space-y-3",children:fn[""].map(x=>u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[u.jsxs("div",{className:"mb-3 flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"break-words font-semibold text-slate-900 text-sm leading-tight mb-1",children:x.mvp}),u.jsx("div",{className:"break-words text-sm text-slate-600 leading-snug",children:x.name})]}),u.jsxs("div",{className:"flex flex-shrink-0 flex-col items-end gap-1.5",children:[x.channel&&u.jsx(ke,{text:x.channel,className:kn(x.channel)}),u.jsx(ke,{text:x.metric,className:"bg-slate-100 text-slate-700 border-slate-200 text-xs whitespace-nowrap"})]})]}),u.jsx("div",{className:"rounded-lg bg-amber-50 border border-amber-200 px-3 py-2 text-sm font-medium text-amber-800",children:"Add results to trigger a verdict"})]},x.id))})]})]})]}),hn.length===0&&Xe.length===0&&u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-6 sm:p-8 text-center",children:[u.jsx("div",{className:"text-3xl sm:text-4xl mb-3",children:""}),u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 mb-2",children:"No review items yet"}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mb-4",children:`When variants move to "Review" status, they'll appear here for decision-making.`}),u.jsxs("div",{className:"inline-flex flex-wrap items-center justify-center gap-1.5 sm:gap-2 text-[10px] sm:text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-2 sm:px-3 py-2",children:[u.jsx("span",{className:"font-medium",children:"Workflow:"}),u.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5",children:"Inbox"}),u.jsx("span",{children:""}),u.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-0.5",children:"Running"}),u.jsx("span",{children:""}),u.jsx("span",{className:"rounded-full bg-orange-100 px-2 py-0.5",children:"Review"}),u.jsx("span",{children:""}),u.jsx("span",{className:"rounded-full bg-green-100 px-2 py-0.5",children:"Decided"})]})]})]}),u.jsxs("footer",{className:"text-center text-[10px] sm:text-xs text-slate-500 px-2",children:[u.jsx("p",{children:"Essentialist setup  Keep it to one table and a 10-minute weekly review."}),u.jsx("p",{className:"mt-1 text-slate-400 sm:hidden",children:"Tap any card to edit"})]})]}),u.jsx(Fa,{isOpen:w,onClose:Qi,title:b?"Edit Variant":"Create New Variant",children:u.jsx(qv,{onSubmit:ff,onCancel:Qi,onSuggest:b?()=>ws(b):void 0,initialData:b?{mvp:b.mvp,name:b.name,status:b.status,metric:b.metric,target:b.target,result:b.result??void 0,week:b.week,next_action:b.next_action??void 0,action_type:b.action_type??void 0,notes:b.notes??void 0,owner:b.owner??void 0,due:b.due??void 0,channel:b.channel??void 0,channel_detail:b.channel_detail??void 0,exposure_n:b.exposure_n??void 0}:void 0,isSubmitting:f,error:N,isEditMode:!!b})}),u.jsx(Fa,{isOpen:F.open,onClose:()=>{vs({open:!1,v:null}),Zt("suggest_dismiss",{})},title:"Decision Suggestor",children:F.v&&F.res&&u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm",children:[u.jsxs("div",{className:"font-medium text-slate-900",children:[F.v.mvp,"  ",F.v.name]}),u.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-x-4 gap-y-1 text-slate-600",children:[u.jsxs("div",{children:["Metric: ",u.jsx("span",{className:"text-slate-900",children:F.v.metric})]}),u.jsxs("div",{children:["Exposure n: ",u.jsx("span",{className:"text-slate-900",children:F.v.exposure_n??""})]}),F.v.baseline_pct!==void 0&&F.v.baseline_pct!==null&&u.jsxs("div",{children:["Baseline: ",u.jsxs("span",{className:"text-slate-900",children:[F.v.baseline_pct,"%"]})]}),u.jsxs("div",{children:["Result: ",u.jsxs("span",{className:"text-slate-900",children:[F.v.result,"%"]})]}),F.v.target!==void 0&&u.jsxs("div",{children:["Target: ",u.jsxs("span",{className:"text-slate-900",children:[F.v.target,"%"]})]}),F.v.decision_rule&&u.jsxs("div",{className:"col-span-2",children:["Rule: ",u.jsxs("span",{className:"text-slate-900",children:[F.v.decision_rule.mode==="absolute"&&`result  ${F.v.decision_rule.thresholdPct}%  Double-Down`,F.v.decision_rule.mode==="uplift"&&`uplift  ${F.v.decision_rule.thresholdPct}%  Double-Down`,F.v.decision_rule.mode==="uplift+sig"&&`uplift  ${F.v.decision_rule.thresholdPct}% AND p < ${F.v.decision_rule.sig}  Double-Down`]})]})]})]}),u.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3 text-sm",children:[u.jsx("div",{className:"mb-2 text-slate-700",children:"Suggestion"}),u.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[u.jsx(ke,{text:F.res.verdict,className:$o(F.res.verdict)}),F.res.upliftPct!==void 0&&u.jsxs("span",{className:"text-slate-600",children:["Uplift  ",F.res.upliftPct.toFixed(1),"%"]}),F.res.pValue!==void 0&&u.jsxs("span",{className:"text-slate-600",children:["p  ",F.res.pValue.toFixed(3)]}),F.res.ci95&&u.jsxs("span",{className:"text-slate-600",children:["95% CI ",(F.res.ci95[0]*100).toFixed(1),"",(F.res.ci95[1]*100).toFixed(1),"%"]})]}),u.jsx("ul",{className:"list-disc pl-5 text-slate-600 space-y-1",children:F.res.reasons.map((x,$)=>u.jsx("li",{children:x},$))}),u.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[u.jsx("button",{onClick:()=>{vs({open:!1,v:null}),Zt("suggest_dismiss",{})},className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50",children:"Close"}),u.jsx("button",{disabled:F.res.verdict==="",onClick:async()=>{if(F.v)try{await a(F.v.id,{verdict_manual:F.res.verdict}),Zt("suggest_apply",{id:F.v.id,verdict:F.res.verdict}),vs({open:!1,v:null})}catch(x){console.error("Failed to apply suggestion:",x)}},className:"rounded-lg bg-slate-900 px-3 py-2 text-sm font-semibold text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-50",children:"Apply suggestion"})]})]})]})}),u.jsx(Yv,{isOpen:ys.open,onClose:()=>{qi({open:!1,v:null}),Zt("guided_modal_dismiss",{})},onSuggest:hf})]}):u.jsx(Gv,{})}Bh(document.getElementById("root")).render(u.jsx(R.StrictMode,{children:u.jsx(wv,{children:u.jsx(Zv,{})})}));
